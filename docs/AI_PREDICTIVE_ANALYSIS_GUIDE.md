# ü§ñ Guide d'Utilisation - Analyse Pr√©dictive IA

**Fonctionnalit√©:** Analyse Pr√©dictive de Disponibilit√©  
**IA:** Google Gemini (gemini-1.5-flash)  
**Date de d√©ploiement:** 5 octobre 2025  
**Statut:** ‚úÖ Impl√©ment√© et fonctionnel

---

## üìã Vue d'Ensemble

L'analyse pr√©dictive utilise l'intelligence artificielle de Google Gemini pour analyser les donn√©es historiques de r√©servation de votre club et g√©n√©rer automatiquement des pr√©dictions, recommandations et alertes actionnables.

---

## üéØ Objectifs de la Fonctionnalit√©

1. **Pr√©dire** les cr√©neaux qui seront complets dans les prochains jours
2. **Recommander** l'ouverture/fermeture de cr√©neaux
3. **Optimiser** le planning pour maximiser les revenus
4. **Alerter** sur les opportunit√©s manqu√©es
5. **Sugg√©rer** des actions concr√®tes √† prendre

---

## üöÄ Configuration

### 1. Obtenir une Cl√© API Gemini

1. Rendez-vous sur [Google AI Studio](https://makersuite.google.com/app/apikey)
2. Connectez-vous avec votre compte Google
3. Cliquez sur "Get API Key"
4. Copiez votre cl√© API

### 2. Configuration du Backend

Ajoutez votre cl√© API dans votre fichier `.env` :

```bash
# Google Gemini AI Configuration
GEMINI_API_KEY=votre_cl√©_api_gemini_ici
GEMINI_MODEL=gemini-1.5-flash
```

### 3. V√©rification

L'analyse pr√©dictive appara√Ætra automatiquement dans le dashboard du club si :
- ‚úÖ La cl√© API Gemini est configur√©e
- ‚úÖ Le club a au moins **20 cours** enregistr√©s sur les 8 derni√®res semaines
- ‚úÖ Le club a au moins **1 cr√©neau ouvert** configur√©

---

## üí° Comment √áa Marche ?

### Collecte des Donn√©es

L'IA analyse automatiquement :
- **P√©riode :** 8 derni√®res semaines
- **Cr√©neaux ouverts :** Tous vos cr√©neaux configur√©s
- **Le√ßons :** Tous les cours confirm√©s/compl√©t√©s

### Donn√©es Analys√©es

```json
{
  "slots": [/* Tous vos cr√©neaux */],
  "lessons": [/* Tous vos cours */],
  "slot_statistics": {
    "total_bookings": 156,
    "avg_weekly_bookings": 19.5,
    "fill_rate": 68.5,
    "revenue_generated": 2340.00
  },
  "day_statistics": [/* Stats par jour */],
  "hourly_statistics": [/* Stats par heure */]
}
```

### G√©n√©ration des Insights

L'IA de Gemini analyse ces donn√©es et g√©n√®re :

1. **Pr√©dictions** üîÆ
   - Cr√©neaux susceptibles d'√™tre complets
   - Tendances de r√©servation
   
2. **Recommandations** üí°
   - Nouveaux cr√©neaux √† ouvrir
   - Cr√©neaux √† fermer ou d√©placer
   
3. **Alertes** ‚ö†Ô∏è
   - Probl√®mes urgents √† r√©soudre
   - Risques identifi√©s
   
4. **Opportunit√©s** üéØ
   - Revenus potentiels perdus
   - Optimisations possibles

---

## üé® Interface Utilisateur

### Dashboard Club

L'analyse pr√©dictive appara√Æt apr√®s les stats principales :

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üìä Stats Principales                    ‚îÇ
‚îÇ  (Enseignants, √âl√®ves, Cours, Revenus) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ü§ñ ANALYSE PR√âDICTIVE IA ‚ö°            ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ  ‚îÇ
‚îÇ  üìä R√©sum√© de l'Analyse                  ‚îÇ
‚îÇ  [Summary generated by AI]              ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ  ‚îÇ
‚îÇ  üí° Insights (Cards)                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
‚îÇ  ‚îÇPredict. ‚îÇ  ‚îÇRecomm.  ‚îÇ              ‚îÇ
‚îÇ  ‚îÇüîÆ HIGH  ‚îÇ  ‚îÇüí° MEDIUM‚îÇ              ‚îÇ
‚îÇ  ‚îÇConfiance‚îÇ  ‚îÇConfiance‚îÇ              ‚îÇ
‚îÇ  ‚îÇ  85%    ‚îÇ  ‚îÇ  72%    ‚îÇ              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ  ‚îÇ
‚îÇ  üéØ Actions Recommand√©es                 ‚îÇ
‚îÇ  1. Ouvrir cr√©neau mercredi 19h         ‚îÇ
‚îÇ  2. Fermer lundi 14h (sous-utilis√©)     ‚îÇ
‚îÇ  3. D√©placer samedi 10h ‚Üí 11h           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Carte d'Insight

Chaque insight affiche :
- **Type** : Pr√©diction, Recommandation, Alerte, Opportunit√©
- **Priorit√©** : üî¥ Haute / üü° Moyenne / üîµ Basse
- **Titre** : Description courte
- **Description** : D√©tails complets
- **Impact attendu** : B√©n√©fices estim√©s
- **Confiance** : Pourcentage de certitude de l'IA
- **Donn√©es d√©taill√©es** : Chiffres supportant l'insight

---

## üìä Exemples de Pr√©dictions

### Exemple 1 : Cr√©neau Complet

```json
{
  "type": "prediction",
  "priority": "high",
  "title": "Cr√©neau Mercredi 18h bient√¥t complet",
  "description": "Bas√© sur les tendances des 8 derni√®res semaines, ce cr√©neau sera probablement complet d'ici 2-3 jours. Il a un taux de remplissage de 92% cette semaine.",
  "impact": "Ouvrir un second cr√©neau pourrait g√©n√©rer 150‚Ç¨ de revenus suppl√©mentaires par semaine",
  "confidence": 87,
  "data": {
    "current_bookings": "11/12",
    "avg_weekly_bookings": 11.2,
    "trend": "+15% vs moyenne"
  }
}
```

### Exemple 2 : Cr√©neau Sous-Utilis√©

```json
{
  "type": "recommendation",
  "priority": "medium",
  "title": "Fermer ou d√©placer Lundi 14h",
  "description": "Ce cr√©neau a un taux de remplissage de seulement 18% (moyenne: 1.4 cours/semaine). Il n'est pas rentable dans sa configuration actuelle.",
  "impact": "√âconomie de 40‚Ç¨/semaine en salaire enseignant + potentiel de r√©allocation vers cr√©neaux populaires",
  "confidence": 92,
  "data": {
    "avg_bookings": 1.4,
    "capacity": 8,
    "fill_rate": "18%",
    "weekly_cost": "40‚Ç¨"
  }
}
```

### Exemple 3 : Opportunit√© de Revenu

```json
{
  "type": "opportunity",
  "priority": "high",
  "title": "12 demandes pour cr√©neaux non disponibles",
  "description": "12 clients ont tent√© de r√©server des cours jeudi 19h-20h, mais aucun cr√©neau n'est ouvert. Cette demande non satisfaite repr√©sente une opportunit√© de revenus.",
  "impact": "Potentiel de 180‚Ç¨/semaine de revenus additionnels",
  "confidence": 95,
  "data": {
    "unsatisfied_demand": 12,
    "avg_price": "15‚Ç¨",
    "potential_weekly_revenue": "180‚Ç¨"
  }
}
```

---

## ‚öôÔ∏è Configuration Avanc√©e

### Cache

Les analyses sont mises en cache pendant **1 heure** pour :
- R√©duire les co√ªts d'API
- Am√©liorer les performances
- √âviter les appels r√©p√©t√©s

```php
// Dans PredictiveAnalysisService.php
$cacheKey = "predictive_analysis_{$club->id}_" . now()->format('Y-m-d-H');
return Cache::remember($cacheKey, 3600, function () use ($club) {
    // G√©n√©ration de l'analyse
});
```

### Param√®tres du Mod√®le IA

```php
// Configuration dans GeminiService.php
'temperature' => 0.3,  // Plus d√©terministe pour l'analyse
'maxTokens' => 4096    // R√©ponses d√©taill√©es
```

- **Temperature basse (0.3)** : R√©ponses plus factuelles et coh√©rentes
- **MaxTokens √©lev√©** : Permet des analyses d√©taill√©es

---

## üí∞ Co√ªts Estim√©s

### Tarification Gemini 1.5 Flash

- **Input** : $0.075 / 1M tokens (~0.075‚Ç¨)
- **Output** : $0.30 / 1M tokens (~0.30‚Ç¨)

### Estimation par Club

```
Analyse compl√®te :
- Input : ~3,000 tokens (donn√©es + instructions)
- Output : ~2,000 tokens (insights g√©n√©r√©s)

Co√ªt par analyse : ~0.0008‚Ç¨ (moins d'1 centime!)

Si analyse toutes les heures :
- 24 analyses/jour √ó 30 jours = 720 analyses/mois
- Co√ªt mensuel : 720 √ó 0.0008‚Ç¨ = ~0.58‚Ç¨/mois

Avec cache (renouvellement toutes les heures) :
- Co√ªt r√©el : ~0.60‚Ç¨/mois par club
```

**Pour 100 clubs :** ~60‚Ç¨/mois

üí° **Extr√™mement rentable** compar√© √† la valeur g√©n√©r√©e !

---

## üêõ D√©pannage

### L'analyse n'appara√Æt pas

**V√©rifications :**
1. ‚úÖ Cl√© API Gemini configur√©e dans `.env`
2. ‚úÖ Minimum 20 cours dans les 8 derni√®res semaines
3. ‚úÖ Au moins 1 cr√©neau ouvert configur√©

**Logs √† v√©rifier :**
```bash
tail -f storage/logs/laravel.log | grep "Gemini"
```

### Erreur "API Key invalide"

```bash
# V√©rifier la cl√© dans .env
grep GEMINI_API_KEY .env

# Tester la cl√©
php artisan tinker
>>> $service = new App\Services\AI\GeminiService();
>>> $service->isAvailable();
=> true
```

### Analyse vide ou incoh√©rente

L'IA peut parfois retourner des insights vides si :
- Pas assez de donn√©es historiques
- Donn√©es trop r√©centes (< 2 semaines)
- Patterns non d√©tect√©s

**Solution :** Attendre plus de donn√©es ou forcer le refresh.

---

## üîê S√©curit√© et Confidentialit√©

### Donn√©es Envoy√©es √† l'IA

‚úÖ **Envoy√© :**
- Statistiques anonymis√©es (nombres, pourcentages)
- Jours de la semaine et heures
- Capacit√©s et taux de remplissage

‚ùå **NON envoy√© :**
- Noms de clubs
- Noms d'√©l√®ves ou enseignants
- Emails ou informations personnelles
- Adresses

### Conformit√© RGPD

‚úÖ **Conforme** - Aucune donn√©e personnelle identifiable n'est transmise √† l'IA.

---

## üìà Am√©lioration Continue

### Prochaines √âvolutions

1. **Alertes Email Automatiques** 
   - Recevoir les insights critiques par email
   
2. **Pr√©dictions Plus Pr√©cises**
   - Int√©gration de donn√©es m√©t√©o
   - Prise en compte des vacances scolaires
   
3. **Recommandations de Prix**
   - Prix dynamique selon la demande
   
4. **Comparaison avec Clubs Similaires**
   - Benchmarking anonymis√©

---

## üÜò Support

Si vous rencontrez des probl√®mes :

1. **V√©rifier les logs** : `storage/logs/laravel.log`
2. **Tester l'API** : Endpoint `/api/club/predictive-analysis`
3. **Contacter le support** : support@bookyourcoach.com

---

## üìö Ressources

- [Documentation Gemini API](https://ai.google.dev/)
- [Tarification Gemini](https://ai.google.dev/pricing)
- [Google AI Studio](https://makersuite.google.com/)

---

**Derni√®re mise √† jour :** 5 octobre 2025  
**Version :** 1.0.0  
**Auteur :** BookYourCoach AI Team
