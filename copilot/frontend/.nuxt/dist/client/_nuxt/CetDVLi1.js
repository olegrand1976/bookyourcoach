import{_}from"./Bm8-yRUG.js";import{e as k,k as h,r as v,f as V,c as a,a as t,d as f,b as C,w as q,l as N,m as U,p as l,v as p,i as r,q as A,F as E,s as M,o as i,t as S,n as b}from"./B2BDWZP7.js";import{u as T}from"./C4hk_EZT.js";const j={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},B={class:"max-w-md w-full space-y-8"},z={class:"mt-2 text-center text-sm text-gray-600"},D={class:"space-y-4"},F={class:"flex items-center"},L=["disabled"],O={key:0},I={key:1},J={key:0,class:"bg-red-50 border border-red-200 rounded-md p-4"},R={class:"text-sm text-red-600"},G={class:"list-disc list-inside space-y-1"},W={__name:"register",setup(H){const x=k(),y=T(),o=h({name:"",email:"",password:"",password_confirmation:"",terms:!1}),d=v(!1),n=v([]),g=async()=>{var u,e,m,s;d.value=!0,n.value=[];try{await x.register(o),y.success("Inscription réussie"),await b("/dashboard")}catch(c){if((e=(u=c.response)==null?void 0:u.data)!=null&&e.errors){const w=c.response.data.errors;n.value=Object.values(w).flat()}else n.value=[((s=(m=c.response)==null?void 0:m.data)==null?void 0:s.message)||"Une erreur est survenue"];y.error("Erreur lors de l'inscription")}finally{d.value=!1}};return V(()=>{x.isAuthenticated&&b("/dashboard")}),(u,e)=>{const m=_;return i(),a("div",j,[t("div",B,[t("div",null,[e[7]||(e[7]=t("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Créer un compte ",-1)),t("p",z,[e[6]||(e[6]=f(" Ou ",-1)),C(m,{to:"/login",class:"font-medium text-primary-600 hover:text-primary-500"},{default:q(()=>e[5]||(e[5]=[f(" connectez-vous à votre compte existant ",-1)])),_:1,__:[5]})])]),t("form",{class:"mt-8 space-y-6",onSubmit:N(g,["prevent"])},[t("div",D,[t("div",null,[e[8]||(e[8]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700"}," Nom complet ",-1)),l(t("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=s=>r(o).name=s),name:"name",type:"text",required:"",class:"input-field",placeholder:"Votre nom complet"},null,512),[[p,r(o).name]])]),t("div",null,[e[9]||(e[9]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," Adresse email ",-1)),l(t("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=s=>r(o).email=s),name:"email",type:"email",autocomplete:"email",required:"",class:"input-field",placeholder:"votre@email.com"},null,512),[[p,r(o).email]])]),t("div",null,[e[10]||(e[10]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),l(t("input",{id:"password","onUpdate:modelValue":e[2]||(e[2]=s=>r(o).password=s),name:"password",type:"password",required:"",class:"input-field",placeholder:"Au moins 8 caractères"},null,512),[[p,r(o).password]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700"}," Confirmer le mot de passe ",-1)),l(t("input",{id:"password_confirmation","onUpdate:modelValue":e[3]||(e[3]=s=>r(o).password_confirmation=s),name:"password_confirmation",type:"password",required:"",class:"input-field",placeholder:"Confirmez votre mot de passe"},null,512),[[p,r(o).password_confirmation]])])]),t("div",F,[l(t("input",{id:"terms","onUpdate:modelValue":e[4]||(e[4]=s=>r(o).terms=s),name:"terms",type:"checkbox",required:"",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[A,r(o).terms]]),e[12]||(e[12]=t("label",{for:"terms",class:"ml-2 block text-sm text-gray-900"},[f(" J'accepte les "),t("a",{href:"#",class:"text-primary-600 hover:text-primary-500"}," conditions d'utilisation ")],-1))]),t("div",null,[t("button",{type:"submit",disabled:r(d),class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[r(d)?(i(),a("span",O,"Création en cours...")):(i(),a("span",I,"Créer mon compte"))],8,L)]),r(n).length>0?(i(),a("div",J,[t("div",R,[t("ul",G,[(i(!0),a(E,null,M(r(n),s=>(i(),a("li",{key:s},S(s),1))),128))])])])):U("",!0)],32)])])}}};export{W as default};
