#!/bin/bash

echo "ğŸ‰ Installation BookYourCoach - SUCCÃˆS COMPLET !"
echo "================================================="
echo ""
echo "âœ… Tous les services sont opÃ©rationnels et fonctionnels !"
echo ""
echo "ğŸŒ ACCÃˆS AUX SERVICES:"
echo "----------------------"
echo "ğŸ“± Frontend (Interface utilisateur):"
echo "   ğŸ”— URL: http://localhost:3001"
echo "   ï¿½ FonctionnalitÃ©s: Interface complÃ¨te, proxy API configurÃ©"
echo ""
echo "ğŸ”§ Backend API (Laravel):"
echo "   ğŸ”— URL: http://localhost:8081"
echo "   ï¿½ FonctionnalitÃ©s: API REST complÃ¨te, authentification JWT"
echo ""
echo "ğŸ³ Frontend Docker (Alternative):"
echo "   ğŸ”— URL: http://localhost:3000"
echo "   ğŸ“‹ Note: Version containerisÃ©e"
echo ""
echo "ğŸ’¾ Base de donnÃ©es MySQL:"
echo "   ğŸ”— Port: 3307"
echo "   ğŸ‘¤ Utilisateur: root"
echo "   ğŸ”‘ Mot de passe: root_password"
echo "   ğŸ“Š Base: bookyourcoach"
echo ""
echo "ğŸ”‘ IDENTIFIANTS DE CONNEXION:"
echo "-----------------------------"
echo "ğŸ‘¤ Utilisateur Admin:"
echo "   ğŸ“§ Email: admin@bookyourcoach.com"
echo "   ğŸ”‘ Mot de passe: admin123"
echo "   ğŸ­ RÃ´le: Administrateur"
echo ""
echo "ï¿½ï¸  COMMANDES UTILES:"
echo "---------------------"
echo "ğŸ”„ RedÃ©marrage complet:"
echo "   ./setup-master.sh restart"
echo ""
echo "ğŸ” Diagnostic systÃ¨me:"
echo "   ./setup-master.sh diagnostic"
echo ""
echo "ğŸ§¹ Nettoyage:"
echo "   ./setup-master.sh clean"
echo ""
echo "ğŸ³ Docker - Voir les logs:"
echo "   docker-compose logs -f"
echo ""
echo "ğŸ“Š Docker - Ã‰tat des services:"
echo "   docker-compose ps"
echo ""
echo "ğŸ”§ PAGES DE TEST ET DEBUG:"
echo "--------------------------"
echo "ğŸ§ª Test API et configuration:"
echo "   http://localhost:3001/test-api"
echo ""
echo "ğŸ“‹ Liste des enseignants:"
echo "   http://localhost:3001/teachers"
echo ""
echo "ğŸ” Page de connexion:"
echo "   http://localhost:3001/login"
echo ""
echo "ï¿½ STATUT DES SERVICES:"
echo "----------------------"
echo -n "ğŸ” VÃ©rification en cours..."

# Test rapide des services
FRONTEND_OK=$(curl -s -o /dev/null -w "%{http_code}" http://localhost:3001 2>/dev/null)
BACKEND_OK=$(curl -s -o /dev/null -w "%{http_code}" http://localhost:8081/api/health 2>/dev/null)
DOCKER_OK=$(docker-compose ps 2>/dev/null | grep -c "Up" || echo "0")

echo ""
if [ "$FRONTEND_OK" = "200" ]; then
    echo "âœ… Frontend: OpÃ©rationnel"
else
    echo "âŒ Frontend: ProblÃ¨me dÃ©tectÃ©"
fi

if [ "$BACKEND_OK" = "200" ]; then
    echo "âœ… Backend API: OpÃ©rationnel"
else
    echo "âŒ Backend API: ProblÃ¨me dÃ©tectÃ©"
fi

if [ "$DOCKER_OK" -gt "0" ]; then
    echo "âœ… Docker: $DOCKER_OK service(s) actif(s)"
else
    echo "âŒ Docker: Aucun service actif"
fi

echo ""
echo "ï¿½ PROCHAINES Ã‰TAPES:"
echo "--------------------"
echo "1. ğŸŒ Ouvrez votre navigateur sur http://localhost:3001"
echo "2. ğŸ” Connectez-vous avec admin@bookyourcoach.com / admin123"
echo "3. ğŸ¯ Explorez les fonctionnalitÃ©s de l'application"
echo "4. ğŸ‘¥ CrÃ©ez des enseignants et Ã©lÃ¨ves depuis l'interface admin"
echo "5. ğŸ“… Testez la rÃ©servation de cours"
echo ""
echo "ï¿½ EN CAS DE PROBLÃˆME:"
echo "---------------------"
echo "ğŸ”„ RedÃ©marrez tout: ./setup-master.sh restart"
echo "ğŸ” Diagnostiquez: ./setup-master.sh diagnostic"
echo "ï¿½ Consultez les logs: docker-compose logs"
echo ""
echo "ğŸ“ DOCUMENTATION:"
echo "----------------"
echo "ğŸ“– README: ./README.md"
echo "ğŸ”§ Docker: ./DOCKER.md"
echo "ğŸ“Š Log dÃ©taillÃ©: ./setup-diagnostic.log"
echo ""
echo "ï¿½ Installation terminÃ©e avec succÃ¨s !"
echo "Bon dÃ©veloppement avec BookYourCoach ! ğŸâœ¨"
