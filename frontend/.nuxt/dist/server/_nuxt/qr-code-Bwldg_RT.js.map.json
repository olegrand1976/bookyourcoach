{"file":"qr-code-Bwldg_RT.js","mappings":";;;;;;;AA+IA,UAAM,OAAO,IAAI,EAAE;AACnB,UAAM,aAAa,IAAI,IAAI;AAC3B,UAAM,iBAAiB,IAAI,KAAK;AAuEhC,UAAM,aAAa,CAAC,eAAe;AACjC,UAAI,CAAC,WAAY,QAAO;AACxB,aAAO,IAAI,KAAK,UAAU,EAAE,mBAAmB,SAAS;AAAA,QACtD,MAAM;AAAA,QACN,OAAO;AAAA,QACP,KAAK;AAAA,QACL,MAAM;AAAA,QACN,QAAQ;AAAA,MAAA,CACT;AAAA,IACH;;mBAhOOA,eAAAC,WAAA,EAAA,OAAM,0BAAA,GAAyB,MAAA,CAAA,wxBAmByBC,eAAA,KAAA,MAAK,IAAI,kCAChCA,eAAA,KAAA,MAAK,KAAK,yCACFA,eAAA,KAAA,MAAK,OAAO,MAAQA,eAAA,KAAA,MAAK,IAAI;UAYtD,WAAA,OAAU;AACN,cAAA,wFAAA,WAAA,MAAW,UAAM,EAAA,cAAA;AAAA;;;;UAWvB,WAAA,OAAU;gHAEyBA,eAAA,WAAA,MAAW,OAAO,oGAGb,WAAW,WAAA,MAAW,YAAY,CAAA;;;;8GAQrE,WAAA,KAAU,IAAA,cAAA,2gBAWX,eAAA,KAAc,IAAA,cAAA;UAGd,eAAA,OAAc;;;;;oCAMhB,eAAA,QAAc,oBAAA,WAAA,CAAA,qzDAAA;AAAA;;;;;;;;;","names":["_ssrRenderAttrs","_mergeProps","_ssrInterpolate"],"sources":["../../../../pages/club/qr-code.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-50\">\n    <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <!-- Header -->\n      <div class=\"text-center mb-8\">\n        <h1 class=\"text-3xl font-bold text-gray-900 mb-2\">QR Code du Club</h1>\n        <p class=\"text-gray-600\">\n          Partagez ce QR code pour permettre aux enseignants et étudiants de rejoindre votre club\n        </p>\n      </div>\n\n      <!-- Club Info -->\n      <div class=\"bg-white rounded-xl shadow-lg p-6 mb-8\">\n        <div class=\"flex items-center space-x-4\">\n          <div class=\"bg-blue-100 p-3 rounded-lg\">\n            <svg class=\"w-8 h-8 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"></path>\n            </svg>\n          </div>\n          <div>\n            <h2 class=\"text-xl font-semibold text-gray-900\">{{ club.name }}</h2>\n            <p class=\"text-gray-600\">{{ club.email }}</p>\n            <p class=\"text-sm text-gray-500\">{{ club.address }}, {{ club.city }}</p>\n          </div>\n        </div>\n      </div>\n\n      <!-- QR Code Display -->\n      <div class=\"bg-white rounded-xl shadow-lg p-8 mb-8\">\n        <div class=\"text-center\">\n          <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Code QR du Club</h3>\n          \n          <!-- QR Code Image -->\n          <div class=\"flex justify-center mb-6\">\n            <div v-if=\"qrCodeData\" class=\"bg-white p-4 rounded-lg border-2 border-gray-200\">\n              <div v-html=\"qrCodeData.qr_svg\" class=\"w-64 h-64\"></div>\n            </div>\n            <div v-else class=\"w-64 h-64 bg-gray-100 rounded-lg flex items-center justify-center\">\n              <div class=\"text-center\">\n                <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n                <p class=\"text-gray-600\">Génération du QR code...</p>\n              </div>\n            </div>\n          </div>\n\n          <!-- QR Code Info -->\n          <div v-if=\"qrCodeData\" class=\"space-y-2\">\n            <p class=\"text-sm text-gray-600\">\n              <span class=\"font-medium\">Code:</span> {{ qrCodeData.qr_code }}\n            </p>\n            <p class=\"text-sm text-gray-600\">\n              <span class=\"font-medium\">Généré le:</span> {{ formatDate(qrCodeData.generated_at) }}\n            </p>\n          </div>\n\n          <!-- Actions -->\n          <div class=\"mt-6 flex flex-col sm:flex-row gap-4 justify-center\">\n            <button\n              @click=\"downloadQRCode\"\n              :disabled=\"!qrCodeData\"\n              class=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center space-x-2\"\n            >\n              <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n              </svg>\n              <span>Télécharger</span>\n            </button>\n            \n            <button\n              @click=\"regenerateQRCode\"\n              :disabled=\"isRegenerating\"\n              class=\"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center space-x-2\"\n            >\n              <svg v-if=\"isRegenerating\" class=\"w-5 h-5 animate-spin\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"></path>\n              </svg>\n              <svg v-else class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"></path>\n              </svg>\n              <span>{{ isRegenerating ? 'Régénération...' : 'Régénérer' }}</span>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!-- Instructions -->\n      <div class=\"bg-blue-50 rounded-xl p-6\">\n        <h3 class=\"text-lg font-semibold text-blue-900 mb-4\">Comment utiliser ce QR code ?</h3>\n        <div class=\"space-y-3 text-blue-800\">\n          <div class=\"flex items-start space-x-3\">\n            <div class=\"bg-blue-200 rounded-full p-1 mt-0.5\">\n              <svg class=\"w-4 h-4 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n              </svg>\n            </div>\n            <p>Les enseignants et étudiants peuvent scanner ce QR code pour rejoindre automatiquement votre club</p>\n          </div>\n          <div class=\"flex items-start space-x-3\">\n            <div class=\"bg-blue-200 rounded-full p-1 mt-0.5\">\n              <svg class=\"w-4 h-4 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n              </svg>\n            </div>\n            <p>Vous pouvez imprimer ce QR code et l'afficher dans votre club</p>\n          </div>\n          <div class=\"flex items-start space-x-3\">\n            <div class=\"bg-blue-200 rounded-full p-1 mt-0.5\">\n              <svg class=\"w-4 h-4 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n              </svg>\n            </div>\n            <p>Le QR code peut être partagé par email ou sur les réseaux sociaux</p>\n          </div>\n        </div>\n      </div>\n\n      <!-- Back Button -->\n      <div class=\"mt-8 text-center\">\n        <button\n          @click=\"goBack\"\n          class=\"bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors flex items-center space-x-2 mx-auto\"\n        >\n          <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"></path>\n          </svg>\n          <span>Retour au tableau de bord</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useToast } from '@/composables/useToast'\n\ndefinePageMeta({\n  middleware: ['auth']\n})\n\nconst { showToast } = useToast()\n\n// State\nconst club = ref({})\nconst qrCodeData = ref(null)\nconst isRegenerating = ref(false)\n\n// Methods\nconst loadClubData = async () => {\n  try {\n    const config = useRuntimeConfig()\n    const response = await $fetch(`${config.public.apiBase}/club/dashboard-test`)\n    \n    if (response.success && response.data && response.data.club) {\n      club.value = response.data.club\n      await loadQRCode()\n    }\n  } catch (error) {\n    console.error('❌ Erreur lors du chargement des données du club:', error)\n    showToast('Erreur lors du chargement des données du club', 'error')\n  }\n}\n\nconst loadQRCode = async () => {\n  try {\n    const config = useRuntimeConfig()\n    const response = await $fetch(`${config.public.apiBase}/qr-code/club/${club.value.id}`)\n    \n    if (response.success) {\n      qrCodeData.value = response.data\n    }\n  } catch (error) {\n    console.error('❌ Erreur lors du chargement du QR code:', error)\n    showToast('Erreur lors du chargement du QR code', 'error')\n  }\n}\n\nconst regenerateQRCode = async () => {\n  isRegenerating.value = true\n  \n  try {\n    // Force regeneration by clearing existing QR code\n    const config = useRuntimeConfig()\n    const response = await $fetch(`${config.public.apiBase}/qr-code/club/${club.value.id}`)\n    \n    if (response.success) {\n      qrCodeData.value = response.data\n      showToast('QR code régénéré avec succès', 'success')\n    }\n  } catch (error) {\n    console.error('❌ Erreur lors de la régénération du QR code:', error)\n    showToast('Erreur lors de la régénération du QR code', 'error')\n  } finally {\n    isRegenerating.value = false\n  }\n}\n\nconst downloadQRCode = () => {\n  if (!qrCodeData.value) return\n  \n  try {\n    // Create a temporary link to download the QR code\n    const link = document.createElement('a')\n    link.href = `data:image/png;base64,${qrCodeData.value.qr_image}`\n    link.download = `qr-code-club-${club.value.name.replace(/\\s+/g, '-').toLowerCase()}.png`\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n    \n    showToast('QR code téléchargé avec succès', 'success')\n  } catch (error) {\n    console.error('❌ Erreur lors du téléchargement:', error)\n    showToast('Erreur lors du téléchargement', 'error')\n  }\n}\n\nconst formatDate = (dateString) => {\n  if (!dateString) return 'N/A'\n  return new Date(dateString).toLocaleDateString('fr-FR', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit'\n  })\n}\n\nconst goBack = () => {\n  navigateTo('/club/dashboard')\n}\n\nonMounted(() => {\n  loadClubData()\n})\n</script>\n"],"version":3}