{"file":"admin-o3tMyGPW.js","mappings":";;;;;;;;;;;;;;;;;AACE,MAAA,kCAA+B,OAAA,IAAA,SAAA;AAAA,MAAA,QAAA;AAG/B,oBAAc,aAAS;AACrB,MAAA,UAAA,SAAA;AACE,IAAA,CAAA,qBAAoBA,aAAU,MAAA,IAAa,qBAAkB;AAC3D,YAAI,cAAS,UAAA,UAAkB,CAAA,EAAA,MAAA,YAAA;AAC7B,YAAA,SAAM,kBAAM;AACV,gBAAA,MAAA;AACA,wBAAQ;AACT,oBAAA;AAAA,UACH,CAAA;AAAA,QACD;AAAA,MACF,CAAA;AAAA,IACH,CAAA,CAAA,GAAA,MAAA,QAAA,UAAA;AAAA,EAEA;AACE,MAAA,CAAA,2BAA0B;AAC5B,WAAA,WAAA,QAAA;AAAA,EAEA;AAEE,MAAA,CAAA,mBAAqB;AACvB,WAAA,WAAA,GAAA;AAAA,EACF;;","names":["__executeAsync"],"sources":["../../../../middleware/admin.ts"],"sourcesContent":["export default defineNuxtRouteMiddleware(async (to, from) => {\n  const authStore = useAuthStore()\n\n  // Attendre que l'état d'authentification soit initialisé\n  if (authStore.loading) {\n    await new Promise(resolve => {\n      const unsubscribe = authStore.$onAction(({ name, after }) => {\n        if (name === 'initializeAuth') {\n          after(() => {\n            unsubscribe()\n            resolve()\n          })\n        }\n      })\n    })\n  }\n  \n  if (!authStore.isAuthenticated) {\n    return navigateTo('/login')\n  }\n  \n  if (!authStore.isAdmin) {\n    // Rediriger vers une page \"non autorisé\" serait mieux, mais en attendant, le dashboard principal est un bon repli.\n    return navigateTo('/') \n  }\n})"],"version":3}