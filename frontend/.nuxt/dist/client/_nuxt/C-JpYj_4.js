import{f as h,A as f,h as c,x as y,c as d,a as t,d as l,t as o,m as e,k as g,B as T,o as p}from"./ROMuWq-R.js";const v={class:"p-8"},k={class:"space-y-4"},S={class:"p-4 border rounded"},x={class:"p-4 border rounded"},N={class:"p-4 border rounded"},w={key:0,class:"mt-2 p-2 bg-gray-100 rounded"},C={class:"p-4 border rounded"},D={key:0,class:"mt-2 p-2 bg-gray-100 rounded"},I={__name:"test-auth-complete",setup(E){const r=h(),i=f("auth-token"),u=c(null),a=c(null),b=async()=>{try{const{$api:n}=T(),s=await n.get("/auth/user");u.value=s.data}catch(n){u.value={error:n.message}}},m=async()=>{try{const n=await $fetch("/teacher/dashboard");a.value="Succ√®s: "+JSON.stringify(n)}catch(n){a.value="Erreur: "+n.message}},A=async()=>{try{const n=await $fetch("/student/dashboard");a.value="Succ√®s: "+JSON.stringify(n)}catch(n){a.value="Erreur: "+n.message}};return y(async()=>{console.log("üîÑ [TEST] Initialisation de la page de test"),await r.initializeAuth(),console.log("‚úÖ [TEST] Authentification initialis√©e")}),(n,s)=>(p(),d("div",v,[s[12]||(s[12]=t("h1",{class:"text-2xl font-bold mb-4"},"Test d'authentification complet",-1)),t("div",k,[t("div",S,[s[6]||(s[6]=t("h3",{class:"font-semibold"},"√âtat du store d'authentification :",-1)),t("p",null,[s[0]||(s[0]=t("strong",null,"isAuthenticated:",-1)),l(" "+o(e(r).isAuthenticated),1)]),t("p",null,[s[1]||(s[1]=t("strong",null,"Token pr√©sent:",-1)),l(" "+o(!!e(r).token),1)]),t("p",null,[s[2]||(s[2]=t("strong",null,"User:",-1)),l(" "+o(e(r).user?e(r).user.email:"Aucun"),1)]),t("p",null,[s[3]||(s[3]=t("strong",null,"canActAsTeacher:",-1)),l(" "+o(e(r).canActAsTeacher),1)]),t("p",null,[s[4]||(s[4]=t("strong",null,"canActAsStudent:",-1)),l(" "+o(e(r).canActAsStudent),1)]),t("p",null,[s[5]||(s[5]=t("strong",null,"isAdmin:",-1)),l(" "+o(e(r).isAdmin),1)])]),t("div",x,[s[9]||(s[9]=t("h3",{class:"font-semibold"},"Cookies :",-1)),t("p",null,[s[7]||(s[7]=t("strong",null,"auth-token:",-1)),l(" "+o(e(i)?"Pr√©sent":"Absent"),1)]),t("p",null,[s[8]||(s[8]=t("strong",null,"Valeur:",-1)),l(" "+o(e(i)?e(i).substring(0,20)+"...":"N/A"),1)])]),t("div",N,[s[10]||(s[10]=t("h3",{class:"font-semibold"},"Test API :",-1)),t("button",{onClick:b,class:"px-4 py-2 bg-blue-500 text-white rounded"}," Tester l'API "),e(u)?(p(),d("div",w,[t("pre",null,o(JSON.stringify(e(u),null,2)),1)])):g("",!0)]),t("div",C,[s[11]||(s[11]=t("h3",{class:"font-semibold"},"Test de navigation :",-1)),t("button",{onClick:m,class:"px-4 py-2 bg-green-500 text-white rounded mr-2"}," Test Teacher Dashboard "),t("button",{onClick:A,class:"px-4 py-2 bg-purple-500 text-white rounded"}," Test Student Dashboard "),e(a)?(p(),d("div",D,[t("pre",null,o(e(a)),1)])):g("",!0)])])]))}};export{I as default};
