import{_ as m}from"./BdeqrG8w.js";import{_ as g,r as f}from"./fkB7ZejG.js";import{f as y,h as _,D as v,x as b,O as w,c as u,o as d,a as e,b as s,w as a,k as h,t as A,m as k,ah as N,q as D,A as M}from"./Bx8T7jKC.js";const C={class:"min-h-screen bg-gray-50"},L={class:"bg-white shadow-lg border-b-4 border-red-500"},U={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},O={class:"flex justify-between h-20"},S={class:"flex items-center"},T={class:"flex items-center space-x-6"},I={class:"relative"},E={class:"font-medium"},V={key:0,class:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-xl py-2 z-50 border border-gray-200"},R={__name:"admin",setup(Y){const o=y(),r=_(!1),p=v(()=>o.userName||"Admin"),x=()=>{r.value=!r.value},i=l=>{l.target.closest(".relative")||(r.value=!1)};b(()=>{document.addEventListener("click",i)}),w(()=>{document.removeEventListener("click",i)});const c=async()=>{console.log("🚪 [ADMIN LAYOUT] Début de la déconnexion"),r.value=!1;try{await o.logout(),console.log("🚪 [ADMIN LAYOUT] Store logout terminé"),await new Promise(l=>setTimeout(l,100)),await D("/login"),console.log("🚪 [ADMIN LAYOUT] Redirection vers /login")}catch(l){console.error(" [ADMIN LAYOUT] Erreur lors de la déconnexion:",l),o.user=null,o.token=null,o.isAuthenticated=!1;const t=M("auth-token");t.value=null,localStorage.removeItem("user-data"),window.location.href="/login"}};return(l,t)=>{const n=m;return d(),u("div",C,[e("nav",L,[e("div",U,[e("div",O,[e("div",S,[s(n,{to:"/admin",class:"flex items-center space-x-3 text-xl font-bold text-gray-900"},{default:a(()=>t[0]||(t[0]=[e("img",{src:g,alt:"Acti'Vibe",class:"h-12 w-auto"},null,-1),e("span",{class:"bg-red-100 text-red-700 text-sm font-semibold px-2.5 py-1 rounded-full"},"Admin",-1)])),_:1,__:[0]})]),e("div",T,[e("div",I,[e("button",{onClick:x,class:"flex items-center space-x-2 text-gray-900 bg-gray-50 px-4 py-2 rounded-lg"},[e("span",E,A(p.value),1),s(k(f),{class:"w-4 h-4"})]),r.value?(d(),u("div",V,[t[8]||(t[8]=e("p",{class:"px-4 py-2 text-xs text-gray-500"},"Menu Administration",-1)),s(n,{to:"/admin",class:"flex items-center space-x-3 w-full px-4 py-2 text-gray-700 hover:bg-gray-100"},{default:a(()=>t[1]||(t[1]=[e("span",null,"📊",-1),e("span",null,"Dashboard",-1)])),_:1,__:[1]}),s(n,{to:"/admin/users",class:"flex items-center space-x-3 w-full px-4 py-2 text-gray-700 hover:bg-gray-100"},{default:a(()=>t[2]||(t[2]=[e("span",null,"👥",-1),e("span",null,"Utilisateurs",-1)])),_:1,__:[2]}),s(n,{to:"/admin/contracts",class:"flex items-center space-x-3 w-full px-4 py-2 text-gray-700 hover:bg-gray-100"},{default:a(()=>t[3]||(t[3]=[e("span",null,"📄",-1),e("span",null,"Contrats",-1)])),_:1,__:[3]}),s(n,{to:"/admin/settings",class:"flex items-center space-x-3 w-full px-4 py-2 text-gray-700 hover:bg-gray-100"},{default:a(()=>t[4]||(t[4]=[e("span",null,"⚙️",-1),e("span",null,"Paramètres",-1)])),_:1,__:[4]}),s(n,{to:"/admin/graph-analysis",class:"flex items-center space-x-3 w-full px-4 py-2 text-gray-700 hover:bg-gray-100"},{default:a(()=>t[5]||(t[5]=[e("span",null,"🔗",-1),e("span",null,"Analyse Graphique",-1)])),_:1,__:[5]}),t[9]||(t[9]=e("hr",{class:"my-2 border-gray-200"},null,-1)),s(n,{to:"/",class:"flex items-center space-x-3 w-full px-4 py-2 text-gray-700 hover:bg-gray-100"},{default:a(()=>t[6]||(t[6]=[e("span",null,"🌐",-1),e("span",null,"Retour au site",-1)])),_:1,__:[6]}),e("button",{onClick:c,class:"flex items-center space-x-3 w-full text-left px-4 py-2 text-red-600 hover:bg-red-50"},t[7]||(t[7]=[e("span",null,"🚪",-1),e("span",null,"Déconnexion",-1)]))])):h("",!0)])])])])]),e("main",null,[N(l.$slots,"default")])])}}};export{R as default};
