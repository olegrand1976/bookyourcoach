import{h as v,x as _,c as i,a as e,e as k,k as w,t as r,F as C,p as M,s as m,A as h,o as d}from"./Cqrm1RYS.js";import{u as x}from"./C4hk_EZT.js";const R={class:"min-h-screen bg-gray-50"},z={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Q={class:"bg-white rounded-xl shadow-lg overflow-hidden"},B={class:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50"},$={class:"flex items-center justify-between"},j={class:"flex items-center space-x-3"},q={class:"text-sm text-gray-600"},V=["disabled"],D={class:"p-8"},H={key:0,class:"text-center"},E={class:"inline-block p-4 bg-white border-2 border-gray-200 rounded-lg shadow-sm"},N=["innerHTML"],T={class:"mt-6 space-y-2"},L={class:"font-mono text-sm bg-gray-100 px-3 py-2 rounded-lg inline-block"},F={class:"mt-4 text-xs text-gray-500"},P={key:1,class:"text-center py-12"},S={key:0,class:"mt-8 bg-white rounded-xl shadow-lg overflow-hidden"},A={class:"p-6"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},U={class:"flex items-center justify-between"},I={class:"font-medium text-gray-900"},J={class:"text-sm text-gray-600"},K={class:"text-xs text-emerald-600"},Y={__name:"qr-code",setup(O){const n=v(null),l=v(null),g=v([]),c=v(!1),b=async()=>{try{const t=m(),s=h("auth-token"),a=await $fetch(`${t.public.apiBase}/auth/user-test`);if(n.value=a.user,n.value){const o=await $fetch(`${t.public.apiBase}/qr-code/${n.value.id}`);o.success&&(l.value=o.data)}}catch(t){console.error("Erreur lors du chargement des données:",t)}},f=async()=>{var t;try{const s=m(),a=h("auth-token");if(((t=n.value)==null?void 0:t.role)==="teacher"){const o=await $fetch(`${s.public.apiBase}/teacher/clubs`);o.success&&(g.value=o.data)}}catch(s){console.error("Erreur lors du chargement des clubs:",s)}},y=async()=>{c.value=!0;try{const t=m(),s=h("auth-token"),a=await $fetch(`${t.public.apiBase}/qr-code/${n.value.id}`);if(a.success){l.value=a.data;const{showToast:o}=x();o("Nouveau QR code généré !","success")}}catch(t){console.error("Erreur lors de la génération du QR code:",t);const{showToast:s}=x();s("Erreur lors de la génération du QR code","error")}finally{c.value=!1}},p=t=>new Date(t).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"});return _(()=>{b(),f()}),(t,s)=>{var a,o;return d(),i("div",R,[e("div",z,[s[6]||(s[6]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Mon QR Code"),e("p",{class:"mt-2 text-gray-600"}," Présentez ce QR code aux clubs pour vous ajouter rapidement ")],-1)),e("div",Q,[e("div",B,[e("div",$,[e("div",j,[s[1]||(s[1]=e("div",{class:"bg-blue-100 p-2 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})])],-1)),e("div",null,[s[0]||(s[0]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Code QR Personnel",-1)),e("p",q,r((a=n.value)==null?void 0:a.name)+" - "+r((o=n.value)==null?void 0:o.email),1)])]),e("button",{onClick:y,disabled:c.value,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors text-sm font-medium"},r(c.value?"Génération...":"Régénérer"),9,V)])]),e("div",D,[l.value?(d(),i("div",H,[e("div",E,[e("div",{innerHTML:l.value.qr_svg,class:"mx-auto"},null,8,N)]),e("div",T,[s[2]||(s[2]=e("p",{class:"text-sm text-gray-600"},"Code QR:",-1)),e("p",L,r(l.value.qr_code),1)]),e("div",F," Généré le "+r(p(l.value.generated_at)),1)])):(d(),i("div",P,s[3]||(s[3]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1),e("p",{class:"text-gray-500"},"Chargement du QR code...",-1)])))])]),s[7]||(s[7]=k('<div class="mt-8 bg-blue-50 rounded-xl p-6"><div class="flex items-start space-x-3"><div class="bg-blue-100 p-2 rounded-lg"><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div><h4 class="text-lg font-semibold text-gray-900 mb-2">Comment utiliser votre QR code</h4><div class="space-y-2 text-sm text-gray-700"><p>1. <strong>Présentez votre QR code</strong> aux clubs qui souhaitent vous ajouter</p><p>2. <strong>Ils peuvent le scanner</strong> avec leur application ou saisir le code manuellement</p><p>3. <strong>Vous serez ajouté</strong> automatiquement à leur liste d&#39;enseignants</p><p>4. <strong>Vous pourrez enseigner</strong> dans plusieurs clubs simultanément</p></div></div></div></div>',1)),g.value.length>0?(d(),i("div",S,[s[5]||(s[5]=e("div",{class:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-emerald-50 to-teal-50"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Clubs où vous enseignez")],-1)),e("div",A,[e("div",G,[(d(!0),i(C,null,M(g.value,u=>(d(),i("div",{key:u.id,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors"},[e("div",U,[e("div",null,[e("h4",I,r(u.name),1),e("p",J,r(u.email),1),e("p",K,"Membre depuis "+r(p(u.pivot.joined_at)),1)]),s[4]||(s[4]=e("span",{class:"px-2 py-1 text-xs font-medium bg-emerald-100 text-emerald-800 rounded-full"}," Actif ",-1))])]))),128))])])])):w("",!0)])])}}};export{Y as default};
