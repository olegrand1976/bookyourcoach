import{u as f}from"./y45lfyPG.js";import{h as c,x as w,c as n,a as e,e as k,t as a,k as y,d as m,s as u,q as _,o as d}from"./D1UknV-R.js";const C={class:"min-h-screen bg-gray-50"},R={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Q={class:"bg-white rounded-xl shadow-lg p-6 mb-8"},B={class:"flex items-center space-x-4"},j={class:"text-xl font-semibold text-gray-900"},M={class:"text-gray-600"},q={class:"text-sm text-gray-500"},E={class:"bg-white rounded-xl shadow-lg p-8 mb-8"},$={class:"text-center"},H={class:"flex justify-center mb-6"},V={key:0,class:"bg-white p-4 rounded-lg border-2 border-gray-200"},T=["innerHTML"],z={key:1,class:"w-64 h-64 bg-gray-100 rounded-lg flex items-center justify-center"},D={key:0,class:"space-y-2"},L={class:"text-sm text-gray-600"},N={class:"text-sm text-gray-600"},A={class:"mt-6 flex flex-col sm:flex-row gap-4 justify-center"},G=["disabled"],S=["disabled"],F={key:0,class:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},P={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},O={__name:"qr-code",setup(I){const{showToast:l}=f(),r=c({}),o=c(null),i=c(!1),p=async()=>{try{const s=u(),t=await $fetch(`${s.public.apiBase}/club/dashboard-test`);t.success&&t.data&&t.data.club&&(r.value=t.data.club,await v())}catch(s){console.error("❌ Erreur lors du chargement des données du club:",s),l("Erreur lors du chargement des données du club","error")}},v=async()=>{try{const s=u(),t=await $fetch(`${s.public.apiBase}/qr-code/club/${r.value.id}`);t.success&&(o.value=t.data)}catch(s){console.error("❌ Erreur lors du chargement du QR code:",s),l("Erreur lors du chargement du QR code","error")}},g=async()=>{i.value=!0;try{const s=u(),t=await $fetch(`${s.public.apiBase}/qr-code/club/${r.value.id}`);t.success&&(o.value=t.data,l("QR code régénéré avec succès","success"))}catch(s){console.error("❌ Erreur lors de la régénération du QR code:",s),l("Erreur lors de la régénération du QR code","error")}finally{i.value=!1}},h=()=>{if(o.value)try{const s=document.createElement("a");s.href=`data:image/png;base64,${o.value.qr_image}`,s.download=`qr-code-club-${r.value.name.replace(/\s+/g,"-").toLowerCase()}.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s),l("QR code téléchargé avec succès","success")}catch(s){console.error("❌ Erreur lors du téléchargement:",s),l("Erreur lors du téléchargement","error")}},b=s=>s?new Date(s).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",x=()=>{_("/club/dashboard")};return w(()=>{p()}),(s,t)=>(d(),n("div",C,[e("div",R,[t[9]||(t[9]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"QR Code du Club"),e("p",{class:"text-gray-600"}," Partagez ce QR code pour permettre aux enseignants et étudiants de rejoindre votre club ")],-1)),e("div",Q,[e("div",B,[t[0]||(t[0]=e("div",{class:"bg-blue-100 p-3 rounded-lg"},[e("svg",{class:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("div",null,[e("h2",j,a(r.value.name),1),e("p",M,a(r.value.email),1),e("p",q,a(r.value.address)+", "+a(r.value.city),1)])])]),e("div",E,[e("div",$,[t[7]||(t[7]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Code QR du Club",-1)),e("div",H,[o.value?(d(),n("div",V,[e("div",{innerHTML:o.value.qr_svg,class:"w-64 h-64"},null,8,T)])):(d(),n("div",z,t[1]||(t[1]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e("p",{class:"text-gray-600"},"Génération du QR code...")],-1)])))]),o.value?(d(),n("div",D,[e("p",L,[t[2]||(t[2]=e("span",{class:"font-medium"},"Code:",-1)),m(" "+a(o.value.qr_code),1)]),e("p",N,[t[3]||(t[3]=e("span",{class:"font-medium"},"Généré le:",-1)),m(" "+a(b(o.value.generated_at)),1)])])):y("",!0),e("div",A,[e("button",{onClick:h,disabled:!o.value,class:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center space-x-2"},t[4]||(t[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("span",null,"Télécharger",-1)]),8,G),e("button",{onClick:g,disabled:i.value,class:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center space-x-2"},[i.value?(d(),n("svg",F,t[5]||(t[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):(d(),n("svg",P,t[6]||(t[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))),e("span",null,a(i.value?"Régénération...":"Régénérer"),1)],8,S)])])]),t[10]||(t[10]=k('<div class="bg-blue-50 rounded-xl p-6"><h3 class="text-lg font-semibold text-blue-900 mb-4">Comment utiliser ce QR code ?</h3><div class="space-y-3 text-blue-800"><div class="flex items-start space-x-3"><div class="bg-blue-200 rounded-full p-1 mt-0.5"><svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><p>Les enseignants et étudiants peuvent scanner ce QR code pour rejoindre automatiquement votre club</p></div><div class="flex items-start space-x-3"><div class="bg-blue-200 rounded-full p-1 mt-0.5"><svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><p>Vous pouvez imprimer ce QR code et l&#39;afficher dans votre club</p></div><div class="flex items-start space-x-3"><div class="bg-blue-200 rounded-full p-1 mt-0.5"><svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><p>Le QR code peut être partagé par email ou sur les réseaux sociaux</p></div></div></div>',1)),e("div",{class:"mt-8 text-center"},[e("button",{onClick:x,class:"bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors flex items-center space-x-2 mx-auto"},t[8]||(t[8]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),e("span",null,"Retour au tableau de bord",-1)]))])])]))}};export{O as default};
