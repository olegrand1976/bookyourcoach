import{h as p,D as ue,x as ge,c as o,a as e,k as C,H as c,t as l,j as W,l as u,n as M,v as b,z as B,F as _,p as h,e as G,s as D,A as V,o as a}from"./qntuUWic.js";import{u as ce}from"./y45lfyPG.js";const pe={class:"p-8"},me={class:"mb-8"},be={class:"flex space-x-8"},ve={key:0,class:"text-center py-8"},xe={key:1,class:"bg-red-50 border border-red-200 text-red-800 p-4 rounded-lg"},fe={key:2,class:"space-y-6"},ye={class:"bg-white rounded-lg shadow border border-gray-200 p-6"},_e={class:"border border-gray-200 rounded-lg p-6"},he={class:"flex items-center justify-between mb-4"},we={class:"flex items-center space-x-2"},ke={class:"relative inline-flex items-center cursor-pointer"},Ce={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},je={class:"border border-gray-200 rounded-lg p-6"},$e={class:"flex items-center justify-between mb-4"},Pe={class:"flex items-center space-x-2"},De={class:"relative inline-flex items-center cursor-pointer"},Ve={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ue={class:"border border-gray-200 rounded-lg p-6"},Ae={class:"flex items-center justify-between mb-4"},Se={class:"flex items-center space-x-2"},Te={class:"relative inline-flex items-center cursor-pointer"},Me={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Be={class:"border border-gray-200 rounded-lg p-6"},Ee={class:"flex items-center justify-between mb-4"},ze={class:"flex items-center space-x-2"},Ze={class:"relative inline-flex items-center cursor-pointer"},qe={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},He={class:"border border-gray-200 rounded-lg p-6"},Fe={class:"flex items-center justify-between mb-4"},Ie={class:"flex items-center space-x-2"},Re={class:"relative inline-flex items-center cursor-pointer"},Ye={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ke={class:"flex justify-end pt-6 border-t border-gray-200"},Le=["disabled"],Ne={key:0},Ge={key:1},Oe={key:3,class:"space-y-6"},Je={class:"bg-white rounded-lg shadow border border-gray-200 p-6"},Qe={class:"flex items-center justify-between mb-6"},We={class:"flex space-x-3"},Xe=["value"],et={class:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6"},tt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},st={class:"flex items-center justify-between"},lt={class:"flex items-center space-x-2"},rt={class:"text-xs text-gray-500"},nt={class:"text-right"},ot={class:"text-xl font-bold text-green-600"},at={class:"flex items-center justify-between"},it={class:"flex items-center space-x-2"},dt={class:"text-xs text-gray-500"},ut={class:"text-right"},gt={class:"text-xl font-bold text-orange-600"},ct={class:"flex items-center justify-between"},pt={class:"flex items-center space-x-2"},mt={class:"text-xs text-gray-500"},bt={class:"text-right"},vt={class:"text-xl font-bold text-red-600"},xt={class:"flex items-center justify-between"},ft={class:"text-right"},yt={class:"text-xl font-bold text-gray-800"},_t={class:"space-y-4"},ht={class:"flex items-center justify-between mb-4"},wt={class:"flex items-center space-x-4"},kt={class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},Ct={class:"text-blue-600 font-semibold"},jt={class:"font-semibold text-gray-900"},$t={class:"text-sm text-gray-500"},Pt={class:"flex items-center space-x-3"},Dt={class:"flex items-center space-x-2"},Vt={key:0,class:"flex space-x-1"},Ut=["title"],At={key:0,class:"bg-gray-50 rounded-lg p-4 mb-4"},St={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Tt={class:"font-medium"},Mt={class:"font-medium"},Bt={class:"font-medium"},Et={class:"border-t pt-4"},zt={class:"space-y-2"},Zt={class:"flex items-center space-x-4"},qt={class:"text-sm text-gray-600"},Ht={class:"text-sm text-gray-500"},Ft={key:4,class:"space-y-6"},It={class:"bg-white rounded-lg shadow border border-gray-200 p-6"},Rt={class:"flex items-center justify-between mb-6"},Yt={class:"flex space-x-3"},Kt=["value"],Lt={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Nt={class:"bg-blue-50 rounded-lg p-4"},Gt={class:"flex items-center"},Ot={class:"ml-4"},Jt={class:"text-2xl font-semibold text-gray-900"},Qt={class:"bg-green-50 rounded-lg p-4"},Wt={class:"flex items-center"},Xt={class:"ml-4"},es={class:"text-2xl font-semibold text-gray-900"},ts={class:"bg-purple-50 rounded-lg p-4"},ss={class:"flex items-center"},ls={class:"ml-4"},rs={class:"text-2xl font-semibold text-gray-900"},ns={class:"bg-orange-50 rounded-lg p-4"},os={class:"flex items-center"},as={class:"ml-4"},is={class:"text-2xl font-semibold text-gray-900"},ds={class:"bg-white border border-gray-200 rounded-lg p-6 mb-8"},us={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},gs={class:"flex items-center justify-between"},cs={class:"flex items-center space-x-3"},ps={class:"text-xs text-gray-500"},ms={class:"text-right"},bs={class:"text-2xl font-bold text-green-600"},vs={class:"flex items-center justify-between"},xs={class:"flex items-center space-x-3"},fs={class:"text-xs text-gray-500"},ys={class:"text-right"},_s={class:"text-2xl font-bold text-orange-600"},hs={class:"flex items-center justify-between"},ws={class:"flex items-center space-x-3"},ks={class:"text-xs text-gray-500"},Cs={class:"text-right"},js={class:"text-2xl font-bold text-red-600"},$s={class:"flex items-center justify-between"},Ps={class:"text-right"},Ds={class:"text-2xl font-bold text-gray-800"},Vs={class:"space-y-4"},Us={class:"flex items-center justify-between mb-4"},As={class:"font-semibold text-gray-900"},Ss={class:"flex space-x-1"},Ts=["title"],Ms={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},Bs={class:"bg-gray-50 rounded-lg p-3"},Es={class:"text-sm text-gray-500"},zs={class:"text-lg font-semibold"},Zs={class:"bg-gray-50 rounded-lg p-3"},qs={class:"text-sm text-gray-500"},Hs={class:"text-lg font-semibold"},Fs={class:"bg-gray-50 rounded-lg p-3"},Is={class:"text-sm text-gray-500"},Rs={class:"text-lg font-semibold"},Ys={class:"border-t pt-4"},Ks={class:"overflow-x-auto"},Ls={class:"min-w-full divide-y divide-gray-200"},Ns={class:"bg-white divide-y divide-gray-200"},Gs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Os={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Js={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Qs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ws={class:"px-6 py-4 whitespace-nowrap"},Xs={key:5,class:"space-y-6"},el={class:"bg-white rounded-lg shadow border border-gray-200 p-6"},tl={class:"bg-gray-50 rounded-lg p-6"},sl={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ll={class:"relative"},rl={class:"text-xs text-gray-500 mt-1"},nl={class:"relative"},ol={class:"text-xs text-gray-500 mt-1"},al={class:"bg-blue-50 rounded-lg p-6"},il={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},dl={class:"bg-green-50 border border-green-200 rounded-lg p-4"},ul={class:"text-sm text-green-700"},gl={class:"bg-orange-50 border border-orange-200 rounded-lg p-4"},cl={class:"text-sm text-orange-700"},pl={class:"bg-red-50 border border-red-200 rounded-lg p-4"},ml={class:"text-sm text-red-700"},bl={class:"flex justify-end"},vl=["disabled"],xl={key:0},fl={key:1},wl={__name:"contracts",setup(yl){const{showToast:U}=ce(),q=p(!0),w=p(!1),A=p(null),v=p("types"),n=p({volunteer:{active:!0,annual_ceiling:3900,daily_ceiling:42.31,mileage_allowance:.4,max_annual_mileage:2e3},student:{active:!1,annual_ceiling:0,daily_ceiling:0},article17:{active:!1,annual_ceiling:0,daily_ceiling:0},freelance:{active:!1,annual_ceiling:0,daily_ceiling:0},salaried:{active:!1,annual_ceiling:0,daily_ceiling:0}}),S=p([]),j=p(new Date().getFullYear()),H=p([]),$=p("monthly"),F=p(0),I=p(0),R=p(0),Y=p(0),m=p("all"),i=p({orange:80,red:95}),x=p({green:0,orange:0,red:0,black:0}),X={volunteer:"Bénévole",student:"Étudiant",article17:"Article 17",freelance:"Indépendant",salaried:"Salarié"},ee=async()=>{try{const r=D(),t=V("auth-token"),s=await $fetch(`${r.public.apiBase}/admin/settings/contracts`,{headers:{Authorization:`Bearer ${t.value}`}});s.success&&s.data&&(n.value={...n.value,...s.data})}catch(r){console.error("Erreur lors du chargement des types de contrats:",r)}},te=async()=>{var r;w.value=!0;try{const t=D(),s=V("auth-token");await $fetch(`${t.public.apiBase}/admin/settings/contracts`,{method:"PUT",headers:{Authorization:`Bearer ${s.value}`,"Content-Type":"application/json"},body:n.value}),U("Types de contrats mis à jour avec succès !","success")}catch(t){const s=((r=t.data)==null?void 0:r.message)||"Une erreur est survenue lors de la sauvegarde.";U(s,"error")}finally{w.value=!1}},K=async()=>{try{const r=D(),t=V("auth-token"),s=await $fetch(`${r.public.apiBase}/admin/teachers/contracts`,{headers:{Authorization:`Bearer ${t.value}`},params:{year:j.value}});s.success&&(S.value=s.data)}catch(r){console.error("Erreur lors du chargement des enseignants:",r),S.value=ne()}E()},L=async()=>{try{const r=D(),t=V("auth-token"),s=await $fetch(`${r.public.apiBase}/admin/payments/summary`,{headers:{Authorization:`Bearer ${t.value}`},params:{year:j.value,period:$.value}});s.success&&(F.value=s.data.total_payments,I.value=s.data.total_hours,R.value=s.data.active_teachers,Y.value=s.data.exceeded_contracts)}catch(r){console.error("Erreur lors du chargement des paiements:",r),F.value=20220,I.value=520,R.value=8,Y.value=4}},N=r=>X[r]||r,O=r=>r&&{volunteer:"bg-green-100 text-green-800",student:"bg-blue-100 text-blue-800",article17:"bg-purple-100 text-purple-800",freelance:"bg-yellow-100 text-yellow-800",salaried:"bg-indigo-100 text-indigo-800"}[r.type]||"bg-gray-100 text-gray-800",P=r=>{if(!r.current_contract)return[];const t=[],s=n.value[r.current_contract.type];if(!(s!=null&&s.active))return t;const g=(r.annual_amount||0)/s.annual_ceiling*100,f=(r.daily_amount||0)/s.daily_ceiling*100,y=(r.annual_mileage||0)/(s.max_annual_mileage||1)*100;let d="green",z="Dans les limites",Z="Dans les limites";return g>=100||f>=100||y>=100?(d="black",z="Dépassé",Z=`Dépassement: ${g>=100?"Plafond annuel":""} ${f>=100?"Plafond journalier":""} ${y>=100?"Kilométrage":""}`):g>=i.value.red||f>=i.value.red||y>=i.value.red?(d="red",z="Critique",Z=`Critique: ${g>=i.value.red?"Plafond annuel":""} ${f>=i.value.red?"Plafond journalier":""} ${y>=i.value.red?"Kilométrage":""}`):(g>=i.value.orange||f>=i.value.orange||y>=i.value.orange)&&(d="orange",z="Attention",Z=`Attention: ${g>=i.value.orange?"Plafond annuel":""} ${f>=i.value.orange?"Plafond journalier":""} ${y>=i.value.orange?"Kilométrage":""}`),t.push({type:d,status:d,label:z,color:se(d),tooltip:Z}),t},se=r=>({green:"bg-green-500",orange:"bg-orange-500",red:"bg-red-500",black:"bg-gray-800"})[r]||"bg-gray-500",le=r=>({green:"bg-green-100 text-green-800 border-green-200",orange:"bg-orange-100 text-orange-800 border-orange-200",red:"bg-red-100 text-red-800 border-red-200",black:"bg-gray-100 text-gray-800 border-gray-200"})[r]||"bg-gray-100 text-gray-800 border-gray-200",re=r=>({paid:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",overdue:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[r]||"bg-gray-100 text-gray-800",T=r=>r?new Date(r).toLocaleDateString("fr-FR"):"",ne=()=>[{id:1,first_name:"Marie",last_name:"Dubois",email:"marie.dubois@example.com",current_contract:{id:1,type:"volunteer",start_date:"2024-01-01",end_date:null,total_hours:45,total_amount:1200},contract_history:[{id:1,type:"volunteer",start_date:"2024-01-01",end_date:null,total_hours:45,total_amount:1200}],annual_amount:1200,daily_amount:25,annual_mileage:150,period_hours:12,period_amount:320,period_mileage:45,payments:[{id:1,date:"2024-01-15",amount:320,hours:12,mileage:45,status:"paid"}]},{id:2,first_name:"Pierre",last_name:"Martin",email:"pierre.martin@example.com",current_contract:{id:2,type:"volunteer",start_date:"2024-01-01",end_date:null,total_hours:120,total_amount:3315},contract_history:[{id:2,type:"volunteer",start_date:"2024-01-01",end_date:null,total_hours:120,total_amount:3315}],annual_amount:3315,daily_amount:35,annual_mileage:1200,period_hours:30,period_amount:828,period_mileage:300,payments:[{id:2,date:"2024-01-15",amount:828,hours:30,mileage:300,status:"paid"}]},{id:3,first_name:"Sophie",last_name:"Leroy",email:"sophie.leroy@example.com",current_contract:{id:3,type:"volunteer",start_date:"2024-01-01",end_date:null,total_hours:95,total_amount:2800},contract_history:[{id:3,type:"volunteer",start_date:"2024-01-01",end_date:null,total_hours:95,total_amount:2800}],annual_amount:2800,daily_amount:41.5,annual_mileage:1800,period_hours:25,period_amount:700,period_mileage:450,payments:[{id:3,date:"2024-01-15",amount:700,hours:25,mileage:450,status:"paid"}]},{id:4,first_name:"Jean",last_name:"Bernard",email:"jean.bernard@example.com",current_contract:{id:4,type:"volunteer",start_date:"2024-01-01",end_date:null,total_hours:80,total_amount:2200},contract_history:[{id:4,type:"volunteer",start_date:"2024-01-01",end_date:null,total_hours:80,total_amount:2200}],annual_amount:2200,daily_amount:30,annual_mileage:2500,period_hours:20,period_amount:550,period_mileage:625,payments:[{id:4,date:"2024-01-15",amount:550,hours:20,mileage:625,status:"paid"}]},{id:5,first_name:"Claire",last_name:"Moreau",email:"claire.moreau@example.com",current_contract:{id:5,type:"volunteer",start_date:"2024-01-01",end_date:null,total_hours:150,total_amount:4200},contract_history:[{id:5,type:"volunteer",start_date:"2024-01-01",end_date:null,total_hours:150,total_amount:4200}],annual_amount:4200,daily_amount:38,annual_mileage:1500,period_hours:40,period_amount:1050,period_mileage:375,payments:[{id:5,date:"2024-01-15",amount:1050,hours:40,mileage:375,status:"paid"}]},{id:6,first_name:"Antoine",last_name:"Petit",email:"antoine.petit@example.com",current_contract:{id:6,type:"volunteer",start_date:"2024-01-01",end_date:null,total_hours:60,total_amount:1800},contract_history:[{id:6,type:"volunteer",start_date:"2024-01-01",end_date:null,total_hours:60,total_amount:1800}],annual_amount:1800,daily_amount:45,annual_mileage:800,period_hours:15,period_amount:450,period_mileage:200,payments:[{id:6,date:"2024-01-15",amount:450,hours:15,mileage:200,status:"paid"}]},{id:7,first_name:"Isabelle",last_name:"Rousseau",email:"isabelle.rousseau@example.com",current_contract:{id:7,type:"volunteer",start_date:"2024-01-01",end_date:null,total_hours:200,total_amount:5e3},contract_history:[{id:7,type:"volunteer",start_date:"2024-01-01",end_date:null,total_hours:200,total_amount:5e3}],annual_amount:5e3,daily_amount:50,annual_mileage:3e3,period_hours:50,period_amount:1250,period_mileage:750,payments:[{id:7,date:"2024-01-15",amount:1250,hours:50,mileage:750,status:"paid"}]},{id:8,first_name:"Marc",last_name:"Durand",email:"marc.durand@example.com",current_contract:{id:8,type:"freelance",start_date:"2024-02-01",end_date:null,total_hours:80,total_amount:2400},contract_history:[{id:8,type:"freelance",start_date:"2024-02-01",end_date:null,total_hours:80,total_amount:2400}],annual_amount:2400,daily_amount:0,annual_mileage:0,period_hours:20,period_amount:600,period_mileage:0,payments:[{id:8,date:"2024-01-15",amount:600,hours:20,mileage:0,status:"paid"}]}],E=()=>{const r={green:0,orange:0,red:0,black:0};S.value.forEach(t=>{const s=P(t);if(s.length>0){const g=s[0].status;r[g]++}}),x.value=r},J=()=>{E()},k=r=>{m.value=r,E()},Q=ue(()=>m.value==="all"?S.value:S.value.filter(r=>{const t=P(r);return t.length>0?t[0].status===m.value:!1})),oe=()=>{const r=new Date().getFullYear();for(let t=r-2;t<=r+1;t++)H.value.push(t)},ae=async()=>{var r;q.value=!0,A.value=null;try{await Promise.all([ee(),K(),L(),ie()])}catch(t){A.value=((r=t.data)==null?void 0:r.message)||"Une erreur inconnue est survenue.",U(A.value,"error")}finally{q.value=!1}},ie=async()=>{try{const r=D(),t=V("auth-token"),s=await $fetch(`${r.public.apiBase}/admin/settings/exceedance-thresholds`,{headers:{Authorization:`Bearer ${t.value}`}});s.success&&s.data&&(i.value={...i.value,...s.data})}catch(r){console.error("Erreur lors du chargement des paramètres de dépassement:",r)}},de=async()=>{var r;w.value=!0;try{const t=D(),s=V("auth-token");await $fetch(`${t.public.apiBase}/admin/settings/exceedance-thresholds`,{method:"PUT",headers:{Authorization:`Bearer ${s.value}`,"Content-Type":"application/json"},body:i.value}),U("Paramètres de dépassement mis à jour avec succès !","success"),E()}catch(t){const s=((r=t.data)==null?void 0:r.message)||"Une erreur est survenue lors de la sauvegarde.";U(s,"error")}finally{w.value=!1}};return ge(()=>{oe(),ae()}),(r,t)=>(a(),o("div",pe,[t[120]||(t[120]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Contrats",-1)),t[121]||(t[121]=e("p",{class:"text-gray-600 mb-8"},"Gérez les types de contrats et suivez les contrats des enseignants.",-1)),e("div",me,[e("nav",be,[e("button",{onClick:t[0]||(t[0]=s=>v.value="types"),class:c([v.value==="types"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"])}," Types de Contrats ",2),e("button",{onClick:t[1]||(t[1]=s=>v.value="teachers"),class:c([v.value==="teachers"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"])}," Enseignants & Contrats ",2),e("button",{onClick:t[2]||(t[2]=s=>v.value="payments"),class:c([v.value==="payments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"])}," Paiements & Heures ",2),e("button",{onClick:t[3]||(t[3]=s=>v.value="settings"),class:c([v.value==="settings"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"])}," Paramètres ",2)])]),q.value?(a(),o("div",ve,t[36]||(t[36]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Chargement...",-1)]))):A.value?(a(),o("div",xe,[e("p",null,"Une erreur est survenue : "+l(A.value),1)])):v.value==="types"?(a(),o("div",fe,[e("div",ye,[t[64]||(t[64]=e("h2",{class:"text-xl font-bold text-gray-800 mb-4"},"Configuration des Types de Contrats",-1)),e("form",{onSubmit:W(te,["prevent"]),class:"space-y-6"},[e("div",_e,[e("div",he,[t[39]||(t[39]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-800"},"Contrat Bénévole"),e("p",{class:"text-gray-500 text-sm"},"Plafonds et indemnités pour les volontaires")],-1)),e("div",we,[t[38]||(t[38]=e("span",{class:"text-sm text-gray-500"},"Actif",-1)),e("label",ke,[u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>n.value.volunteer.active=s),type:"checkbox",class:"sr-only peer"},null,512),[[M,n.value.volunteer.active]]),t[37]||(t[37]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])])]),n.value.volunteer.active?(a(),o("div",Ce,[e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Plafond annuel (€)",-1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>n.value.volunteer.annual_ceiling=s),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,n.value.volunteer.annual_ceiling,void 0,{number:!0}]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Plafond journalier (€)",-1)),u(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>n.value.volunteer.daily_ceiling=s),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,n.value.volunteer.daily_ceiling,void 0,{number:!0}]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Indemnité kilométrique (€/km)",-1)),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>n.value.volunteer.mileage_allowance=s),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,n.value.volunteer.mileage_allowance,void 0,{number:!0}]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Plafond kilométrique annuel (km)",-1)),u(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>n.value.volunteer.max_annual_mileage=s),type:"number",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,n.value.volunteer.max_annual_mileage,void 0,{number:!0}]])])])):C("",!0)]),e("div",je,[e("div",$e,[t[46]||(t[46]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-800"},"Contrat Étudiant"),e("p",{class:"text-gray-500 text-sm"},"Contrat pour étudiants en formation")],-1)),e("div",Pe,[t[45]||(t[45]=e("span",{class:"text-sm text-gray-500"},"Actif",-1)),e("label",De,[u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>n.value.student.active=s),type:"checkbox",class:"sr-only peer"},null,512),[[M,n.value.student.active]]),t[44]||(t[44]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])])]),n.value.student.active?(a(),o("div",Ve,[e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Plafond annuel (€)",-1)),u(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>n.value.student.annual_ceiling=s),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,n.value.student.annual_ceiling,void 0,{number:!0}]])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Plafond journalier (€)",-1)),u(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>n.value.student.daily_ceiling=s),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,n.value.student.daily_ceiling,void 0,{number:!0}]])])])):C("",!0)]),e("div",Ue,[e("div",Ae,[t[51]||(t[51]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-800"},"Contrat Article 17"),e("p",{class:"text-gray-500 text-sm"},"Contrat spécifique Article 17")],-1)),e("div",Se,[t[50]||(t[50]=e("span",{class:"text-sm text-gray-500"},"Actif",-1)),e("label",Te,[u(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>n.value.article17.active=s),type:"checkbox",class:"sr-only peer"},null,512),[[M,n.value.article17.active]]),t[49]||(t[49]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])])]),n.value.article17.active?(a(),o("div",Me,[e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Plafond annuel (€)",-1)),u(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>n.value.article17.annual_ceiling=s),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,n.value.article17.annual_ceiling,void 0,{number:!0}]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Plafond journalier (€)",-1)),u(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>n.value.article17.daily_ceiling=s),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,n.value.article17.daily_ceiling,void 0,{number:!0}]])])])):C("",!0)]),e("div",Be,[e("div",Ee,[t[56]||(t[56]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-800"},"Contrat Indépendant"),e("p",{class:"text-gray-500 text-sm"},"Travailleur indépendant")],-1)),e("div",ze,[t[55]||(t[55]=e("span",{class:"text-sm text-gray-500"},"Actif",-1)),e("label",Ze,[u(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>n.value.freelance.active=s),type:"checkbox",class:"sr-only peer"},null,512),[[M,n.value.freelance.active]]),t[54]||(t[54]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])])]),n.value.freelance.active?(a(),o("div",qe,[e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Plafond annuel (€)",-1)),u(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>n.value.freelance.annual_ceiling=s),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,n.value.freelance.annual_ceiling,void 0,{number:!0}]])]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Plafond journalier (€)",-1)),u(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>n.value.freelance.daily_ceiling=s),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,n.value.freelance.daily_ceiling,void 0,{number:!0}]])])])):C("",!0)]),e("div",He,[e("div",Fe,[t[61]||(t[61]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-800"},"Contrat Salarié"),e("p",{class:"text-gray-500 text-sm"},"Employé salarié")],-1)),e("div",Ie,[t[60]||(t[60]=e("span",{class:"text-sm text-gray-500"},"Actif",-1)),e("label",Re,[u(e("input",{"onUpdate:modelValue":t[18]||(t[18]=s=>n.value.salaried.active=s),type:"checkbox",class:"sr-only peer"},null,512),[[M,n.value.salaried.active]]),t[59]||(t[59]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])])]),n.value.salaried.active?(a(),o("div",Ye,[e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Plafond annuel (€)",-1)),u(e("input",{"onUpdate:modelValue":t[19]||(t[19]=s=>n.value.salaried.annual_ceiling=s),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,n.value.salaried.annual_ceiling,void 0,{number:!0}]])]),e("div",null,[t[63]||(t[63]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Plafond journalier (€)",-1)),u(e("input",{"onUpdate:modelValue":t[20]||(t[20]=s=>n.value.salaried.daily_ceiling=s),type:"number",step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,n.value.salaried.daily_ceiling,void 0,{number:!0}]])])])):C("",!0)]),e("div",Ke,[e("button",{type:"submit",disabled:w.value,class:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50"},[w.value?(a(),o("span",Ne,"Sauvegarde...")):(a(),o("span",Ge,"Enregistrer les modifications"))],8,Le)])],32)])])):v.value==="teachers"?(a(),o("div",Oe,[e("div",Je,[e("div",Qe,[t[66]||(t[66]=e("h2",{class:"text-xl font-bold text-gray-800"},"Enseignants & Contrats",-1)),e("div",We,[u(e("select",{"onUpdate:modelValue":t[21]||(t[21]=s=>j.value=s),onChange:K,class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(a(!0),o(_,null,h(H.value,s=>(a(),o("option",{key:s,value:s},l(s),9,Xe))),128))],544),[[B,j.value]]),u(e("select",{"onUpdate:modelValue":t[22]||(t[22]=s=>m.value=s),onChange:J,class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},t[65]||(t[65]=[G('<option value="all">Tous les enseignants</option><option value="green">🟢 Dans les limites</option><option value="orange">🟠 Zone d&#39;attention</option><option value="red">🔴 Zone critique</option><option value="black">⚫ Dépassements</option>',5)]),544),[[B,m.value]]),e("button",{onClick:K,class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700"}," Actualiser ")])]),e("div",et,[t[74]||(t[74]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Répartition par Statut de Dépassement",-1)),e("div",tt,[e("div",{onClick:t[23]||(t[23]=s=>k("green")),class:c(["bg-green-50 border border-green-200 rounded-lg p-3 cursor-pointer hover:bg-green-100 transition-colors",{"ring-2 ring-green-500":m.value==="green"}])},[e("div",st,[e("div",lt,[t[68]||(t[68]=e("div",{class:"w-3 h-3 bg-green-500 rounded-full"},null,-1)),e("div",null,[t[67]||(t[67]=e("p",{class:"text-sm font-medium text-gray-600"},"Dans les limites",-1)),e("p",rt,"< "+l(i.value.orange)+"%",1)])]),e("div",nt,[e("p",ot,l(x.value.green),1)])])],2),e("div",{onClick:t[24]||(t[24]=s=>k("orange")),class:c(["bg-orange-50 border border-orange-200 rounded-lg p-3 cursor-pointer hover:bg-orange-100 transition-colors",{"ring-2 ring-orange-500":m.value==="orange"}])},[e("div",at,[e("div",it,[t[70]||(t[70]=e("div",{class:"w-3 h-3 bg-orange-500 rounded-full"},null,-1)),e("div",null,[t[69]||(t[69]=e("p",{class:"text-sm font-medium text-gray-600"},"Zone d'attention",-1)),e("p",dt,l(i.value.orange)+"% - "+l(i.value.red)+"%",1)])]),e("div",ut,[e("p",gt,l(x.value.orange),1)])])],2),e("div",{onClick:t[25]||(t[25]=s=>k("red")),class:c(["bg-red-50 border border-red-200 rounded-lg p-3 cursor-pointer hover:bg-red-100 transition-colors",{"ring-2 ring-red-500":m.value==="red"}])},[e("div",ct,[e("div",pt,[t[72]||(t[72]=e("div",{class:"w-3 h-3 bg-red-500 rounded-full"},null,-1)),e("div",null,[t[71]||(t[71]=e("p",{class:"text-sm font-medium text-gray-600"},"Zone critique",-1)),e("p",mt,l(i.value.red)+"% - 100%",1)])]),e("div",bt,[e("p",vt,l(x.value.red),1)])])],2),e("div",{onClick:t[26]||(t[26]=s=>k("black")),class:c(["bg-gray-50 border border-gray-200 rounded-lg p-3 cursor-pointer hover:bg-gray-100 transition-colors",{"ring-2 ring-gray-500":m.value==="black"}])},[e("div",xt,[t[73]||(t[73]=e("div",{class:"flex items-center space-x-2"},[e("div",{class:"w-3 h-3 bg-gray-800 rounded-full"}),e("div",null,[e("p",{class:"text-sm font-medium text-gray-600"},"Dépassements"),e("p",{class:"text-xs text-gray-500"},"> 100%")])],-1)),e("div",ft,[e("p",yt,l(x.value.black),1)])])],2)])]),e("div",_t,[(a(!0),o(_,null,h(Q.value,s=>{var g,f,y;return a(),o("div",{key:s.id,class:"border border-gray-200 rounded-lg p-4"},[e("div",ht,[e("div",wt,[e("div",kt,[e("span",Ct,l(((g=s.first_name)==null?void 0:g.charAt(0))||((f=s.name)==null?void 0:f.charAt(0))),1)]),e("div",null,[e("h3",jt,l(s.first_name)+" "+l(s.last_name),1),e("p",$t,l(s.email),1)])]),e("div",Pt,[e("span",{class:c(["px-3 py-1 rounded-full text-sm font-medium",O(s.current_contract)])},l(N((y=s.current_contract)==null?void 0:y.type)),3),e("div",Dt,[(a(!0),o(_,null,h(P(s),d=>(a(),o("div",{key:d.type,class:c(["flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium",le(d.status)])},[e("div",{class:c(["w-2 h-2 rounded-full",d.color])},null,2),e("span",null,l(d.label),1)],2))),128))]),P(s).length>0?(a(),o("div",Vt,[(a(!0),o(_,null,h(P(s),d=>(a(),o("div",{key:d.type,class:c(["w-4 h-4 rounded-full border-2 border-white shadow-sm",d.color]),title:d.tooltip},null,10,Ut))),128))])):C("",!0)])]),s.current_contract?(a(),o("div",At,[t[78]||(t[78]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Contrat Actuel",-1)),e("div",St,[e("div",null,[t[75]||(t[75]=e("span",{class:"text-sm text-gray-500"},"Type:",-1)),e("p",Tt,l(N(s.current_contract.type)),1)]),e("div",null,[t[76]||(t[76]=e("span",{class:"text-sm text-gray-500"},"Début:",-1)),e("p",Mt,l(T(s.current_contract.start_date)),1)]),e("div",null,[t[77]||(t[77]=e("span",{class:"text-sm text-gray-500"},"Fin:",-1)),e("p",Bt,l(s.current_contract.end_date?T(s.current_contract.end_date):"Indéterminé"),1)])])])):C("",!0),e("div",Et,[t[79]||(t[79]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Historique des Contrats",-1)),e("div",zt,[(a(!0),o(_,null,h(s.contract_history,d=>(a(),o("div",{key:d.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",Zt,[e("span",{class:c(["px-2 py-1 rounded text-xs font-medium",O(d)])},l(N(d.type)),3),e("span",qt,l(T(d.start_date))+" - "+l(d.end_date?T(d.end_date):"En cours"),1)]),e("div",Ht,l(d.total_hours||0)+"h • "+l(d.total_amount||0)+"€ ",1)]))),128))])])])}),128))])])])):v.value==="payments"?(a(),o("div",Ft,[e("div",It,[e("div",Rt,[t[82]||(t[82]=e("h2",{class:"text-xl font-bold text-gray-800"},"Paiements & Heures",-1)),e("div",Yt,[u(e("select",{"onUpdate:modelValue":t[27]||(t[27]=s=>$.value=s),onChange:L,class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},t[80]||(t[80]=[e("option",{value:"monthly"},"Mensuel",-1),e("option",{value:"yearly"},"Annuel",-1)]),544),[[B,$.value]]),u(e("select",{"onUpdate:modelValue":t[28]||(t[28]=s=>j.value=s),onChange:L,class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(a(!0),o(_,null,h(H.value,s=>(a(),o("option",{key:s,value:s},l(s),9,Kt))),128))],544),[[B,j.value]]),u(e("select",{"onUpdate:modelValue":t[29]||(t[29]=s=>m.value=s),onChange:J,class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},t[81]||(t[81]=[G('<option value="all">Tous les enseignants</option><option value="green">🟢 Dans les limites</option><option value="orange">🟠 Zone d&#39;attention</option><option value="red">🔴 Zone critique</option><option value="black">⚫ Dépassements</option>',5)]),544),[[B,m.value]])])]),e("div",Lt,[e("div",Nt,[e("div",Gt,[t[84]||(t[84]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Ot,[t[83]||(t[83]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Paiements",-1)),e("p",Jt,l(F.value)+"€",1)])])]),e("div",Qt,[e("div",Wt,[t[86]||(t[86]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Xt,[t[85]||(t[85]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Heures",-1)),e("p",es,l(I.value)+"h",1)])])]),e("div",ts,[e("div",ss,[t[88]||(t[88]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",ls,[t[87]||(t[87]=e("p",{class:"text-sm font-medium text-gray-600"},"Enseignants Actifs",-1)),e("p",rs,l(R.value),1)])])]),e("div",ns,[e("div",os,[t[90]||(t[90]=e("div",{class:"p-2 bg-orange-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",as,[t[89]||(t[89]=e("p",{class:"text-sm font-medium text-gray-600"},"Dépassements",-1)),e("p",is,l(Y.value),1)])])])]),e("div",ds,[t[102]||(t[102]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Répartition par Statut de Dépassement",-1)),e("div",us,[e("div",{onClick:t[30]||(t[30]=s=>k("green")),class:c(["bg-green-50 border border-green-200 rounded-lg p-4 cursor-pointer hover:bg-green-100 transition-colors",{"ring-2 ring-green-500":m.value==="green"}])},[e("div",gs,[e("div",cs,[t[92]||(t[92]=e("div",{class:"w-4 h-4 bg-green-500 rounded-full"},null,-1)),e("div",null,[t[91]||(t[91]=e("p",{class:"text-sm font-medium text-gray-600"},"Dans les limites",-1)),e("p",ps,"< "+l(i.value.orange)+"%",1)])]),e("div",ms,[e("p",bs,l(x.value.green),1),t[93]||(t[93]=e("p",{class:"text-xs text-gray-500"},"enseignants",-1))])])],2),e("div",{onClick:t[31]||(t[31]=s=>k("orange")),class:c(["bg-orange-50 border border-orange-200 rounded-lg p-4 cursor-pointer hover:bg-orange-100 transition-colors",{"ring-2 ring-orange-500":m.value==="orange"}])},[e("div",vs,[e("div",xs,[t[95]||(t[95]=e("div",{class:"w-4 h-4 bg-orange-500 rounded-full"},null,-1)),e("div",null,[t[94]||(t[94]=e("p",{class:"text-sm font-medium text-gray-600"},"Zone d'attention",-1)),e("p",fs,l(i.value.orange)+"% - "+l(i.value.red)+"%",1)])]),e("div",ys,[e("p",_s,l(x.value.orange),1),t[96]||(t[96]=e("p",{class:"text-xs text-gray-500"},"enseignants",-1))])])],2),e("div",{onClick:t[32]||(t[32]=s=>k("red")),class:c(["bg-red-50 border border-red-200 rounded-lg p-4 cursor-pointer hover:bg-red-100 transition-colors",{"ring-2 ring-red-500":m.value==="red"}])},[e("div",hs,[e("div",ws,[t[98]||(t[98]=e("div",{class:"w-4 h-4 bg-red-500 rounded-full"},null,-1)),e("div",null,[t[97]||(t[97]=e("p",{class:"text-sm font-medium text-gray-600"},"Zone critique",-1)),e("p",ks,l(i.value.red)+"% - 100%",1)])]),e("div",Cs,[e("p",js,l(x.value.red),1),t[99]||(t[99]=e("p",{class:"text-xs text-gray-500"},"enseignants",-1))])])],2),e("div",{onClick:t[33]||(t[33]=s=>k("black")),class:c(["bg-gray-50 border border-gray-200 rounded-lg p-4 cursor-pointer hover:bg-gray-100 transition-colors",{"ring-2 ring-gray-500":m.value==="black"}])},[e("div",$s,[t[101]||(t[101]=e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-4 h-4 bg-gray-800 rounded-full"}),e("div",null,[e("p",{class:"text-sm font-medium text-gray-600"},"Dépassements"),e("p",{class:"text-xs text-gray-500"},"> 100%")])],-1)),e("div",Ps,[e("p",Ds,l(x.value.black),1),t[100]||(t[100]=e("p",{class:"text-xs text-gray-500"},"enseignants",-1))])])],2)])]),e("div",Vs,[(a(!0),o(_,null,h(Q.value,s=>(a(),o("div",{key:s.id,class:"border border-gray-200 rounded-lg p-4"},[e("div",Us,[e("h3",As,l(s.first_name)+" "+l(s.last_name),1),e("div",Ss,[(a(!0),o(_,null,h(P(s),g=>(a(),o("div",{key:g.type,class:c(["w-3 h-3 rounded-full",g.color]),title:g.tooltip},null,10,Ts))),128))])]),e("div",Ms,[e("div",Bs,[e("p",Es,"Heures "+l($.value==="monthly"?"ce mois":"cette année"),1),e("p",zs,l(s.period_hours||0)+"h",1)]),e("div",Zs,[e("p",qs,"Montant "+l($.value==="monthly"?"ce mois":"cette année"),1),e("p",Hs,l(s.period_amount||0)+"€",1)]),e("div",Fs,[e("p",Is,"Kilométrage "+l($.value==="monthly"?"ce mois":"cette année"),1),e("p",Rs,l(s.period_mileage||0)+"km",1)])]),e("div",Ys,[t[104]||(t[104]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Historique des Paiements",-1)),e("div",Ks,[e("table",Ls,[t[103]||(t[103]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Heures"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Kilométrage"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut")])],-1)),e("tbody",Ns,[(a(!0),o(_,null,h(s.payments,g=>(a(),o("tr",{key:g.id},[e("td",Gs,l(T(g.date)),1),e("td",Os,l(g.amount)+"€",1),e("td",Js,l(g.hours)+"h",1),e("td",Qs,l(g.mileage||0)+"km",1),e("td",Ws,[e("span",{class:c(["px-2 py-1 rounded-full text-xs font-medium",re(g.status)])},l(g.status),3)])]))),128))])])])])]))),128))])])])):v.value==="settings"?(a(),o("div",Xs,[e("div",el,[t[119]||(t[119]=e("h2",{class:"text-xl font-bold text-gray-800 mb-6"},"Paramètres des Zones de Dépassement",-1)),e("form",{onSubmit:W(de,["prevent"]),class:"space-y-6"},[e("div",tl,[t[109]||(t[109]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Seuils de Dépassement",-1)),t[110]||(t[110]=e("p",{class:"text-sm text-gray-600 mb-6"}," Configurez les pourcentages qui définissent les différentes zones de dépassement pour les contrats. ",-1)),e("div",sl,[e("div",null,[t[106]||(t[106]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Seuil Zone d'Attention (Orange) ",-1)),e("div",ll,[u(e("input",{"onUpdate:modelValue":t[34]||(t[34]=s=>i.value.orange=s),type:"number",min:"0",max:"100",step:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"80"},null,512),[[b,i.value.orange,void 0,{number:!0}]]),t[105]||(t[105]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"%")],-1))]),e("p",rl," Enseignants entre "+l(i.value.orange)+"% et "+l(i.value.red)+"% des plafonds ",1)]),e("div",null,[t[108]||(t[108]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Seuil Zone Critique (Rouge) ",-1)),e("div",nl,[u(e("input",{"onUpdate:modelValue":t[35]||(t[35]=s=>i.value.red=s),type:"number",min:"0",max:"100",step:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"95"},null,512),[[b,i.value.red,void 0,{number:!0}]]),t[107]||(t[107]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"%")],-1))]),e("p",ol," Enseignants entre "+l(i.value.red)+"% et 100% des plafonds ",1)])])]),e("div",al,[t[118]||(t[118]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Aperçu des Zones",-1)),e("div",il,[e("div",dl,[t[111]||(t[111]=e("div",{class:"flex items-center space-x-2 mb-2"},[e("div",{class:"w-3 h-3 bg-green-500 rounded-full"}),e("span",{class:"font-medium text-green-800"},"Zone Verte")],-1)),e("p",ul," < "+l(i.value.orange)+"% ",1),t[112]||(t[112]=e("p",{class:"text-xs text-green-600 mt-1"}," Dans les limites ",-1))]),e("div",gl,[t[113]||(t[113]=e("div",{class:"flex items-center space-x-2 mb-2"},[e("div",{class:"w-3 h-3 bg-orange-500 rounded-full"}),e("span",{class:"font-medium text-orange-800"},"Zone Orange")],-1)),e("p",cl,l(i.value.orange)+"% - "+l(i.value.red)+"% ",1),t[114]||(t[114]=e("p",{class:"text-xs text-orange-600 mt-1"}," Zone d'attention ",-1))]),e("div",pl,[t[115]||(t[115]=e("div",{class:"flex items-center space-x-2 mb-2"},[e("div",{class:"w-3 h-3 bg-red-500 rounded-full"}),e("span",{class:"font-medium text-red-800"},"Zone Rouge")],-1)),e("p",ml,l(i.value.red)+"% - 100% ",1),t[116]||(t[116]=e("p",{class:"text-xs text-red-600 mt-1"}," Zone critique ",-1))]),t[117]||(t[117]=G('<div class="bg-gray-50 border border-gray-200 rounded-lg p-4"><div class="flex items-center space-x-2 mb-2"><div class="w-3 h-3 bg-gray-800 rounded-full"></div><span class="font-medium text-gray-800">Zone Noire</span></div><p class="text-sm text-gray-700"> &gt; 100% </p><p class="text-xs text-gray-600 mt-1"> Dépassements </p></div>',1))])]),e("div",bl,[e("button",{type:"submit",disabled:w.value,class:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50"},[w.value?(a(),o("span",xl,"Sauvegarde...")):(a(),o("span",fl,"Enregistrer les paramètres"))],8,vl)])],32)])])):C("",!0)]))}};export{wl as default};
