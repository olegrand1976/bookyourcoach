import{_ as P}from"./BdeqrG8w.js";import{f as D,h as y,r as j,i as T,c as n,a as t,d as v,b as E,w as M,m as l,j as $,k as c,t as g,l as r,v as a,F as C,p as q,z as L,e as w,n as N,o as d,s as R,q as V}from"./Bx8T7jKC.js";const F={class:"min-h-screen bg-gray-50"},I={class:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},G={class:"max-w-md w-full space-y-8"},O={class:"mt-2 text-center text-sm text-gray-600"},J={key:0,class:"space-y-4"},H={class:"grid grid-cols-1 gap-4"},K={class:"space-y-4"},Q={class:"flex items-center justify-between"},W={class:"text-lg font-medium text-gray-900"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Y={key:0,class:"space-y-4"},Z={key:1,class:"space-y-4"},ee={class:"space-y-2"},te=["value"],se={class:"ml-2 text-sm text-gray-700"},le={class:"space-y-4"},oe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},re={class:"md:col-span-2"},ie={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ae={class:"flex items-start"},de={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-md p-4"},ue={key:1,class:"bg-blue-50 border border-blue-200 rounded-md p-4"},pe=["disabled"],me={key:0},ce={key:1},be={key:2,class:"bg-red-50 border border-red-200 rounded-md p-4"},xe={class:"text-sm text-red-600"},fe={class:"list-disc list-inside space-y-1"},_e={__name:"register",setup(ye){const S=D(),i=y(null),b=y(!1),m=y([]),A=y(["Équitation","Natation","Dressage","Saut d'obstacles","Cross-country","Voltige","Pony-games","Aquagym","Aquabike","Nage libre"]),s=j({first_name:"",last_name:"",email:"",phone:"",birth_date:"",street:"",street_number:"",postal_code:"",city:"",country:"Belgium",password:"",password_confirmation:"",terms:!1,club_name:"",club_description:"",specialties:[],experience_years:""}),h=u=>({student:"Élève",teacher:"Enseignant",club:"Club"})[u]||"",_=u=>{i.value=u,s.role=u},U=(u,e="info")=>{console.log(`[${e.toUpperCase()}] ${u}`)},z=async()=>{var u,e,x,o;b.value=!0,m.value=[];try{const p={first_name:s.first_name,last_name:s.last_name,email:s.email,phone:s.phone,birth_date:s.birth_date,street:s.street,street_number:s.street_number,postal_code:s.postal_code,city:s.city,country:s.country,password:s.password,password_confirmation:s.password_confirmation,role:i.value,...i.value==="club"&&{club_name:s.club_name,club_description:s.club_description},...i.value==="teacher"&&{specialties:s.specialties,experience_years:s.experience_years}};console.log("Données d'inscription:",p);const k=R(),B=await $fetch("/auth/register",{method:"POST",baseURL:k.public.apiBase,body:p,headers:{"Content-Type":"application/json",Accept:"application/json"}});console.log("Réponse d'inscription:",B);let f="Inscription réussie !";i.value==="club"?f="Votre inscription a été soumise. Un administrateur validera votre compte sous 24-48h.":i.value==="teacher"?f="Votre inscription a été soumise. Un club partenaire validera votre compte.":f="Votre compte a été créé avec succès !",U(f,"success"),i.value==="student"?await V("/login"):await V("/login?pending=true")}catch(p){if(console.error("Erreur d'inscription:",p),(e=(u=p.response)==null?void 0:u.data)!=null&&e.errors){const k=p.response.data.errors;m.value=Object.values(k).flat()}else m.value=[((o=(x=p.response)==null?void 0:x.data)==null?void 0:o.message)||"Une erreur est survenue lors de l'inscription"];U("Erreur lors de l'inscription","error")}finally{b.value=!1}};return T(()=>{S.isAuthenticated&&V("/dashboard")}),(u,e)=>{const x=P;return d(),n("div",F,[t("div",I,[t("div",G,[t("div",null,[e[23]||(e[23]=t("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Inscription ",-1)),t("p",O,[e[22]||(e[22]=v(" Déjà un compte ? ",-1)),E(x,{to:"/login",class:"font-medium text-primary-600 hover:text-primary-500"},{default:M(()=>e[21]||(e[21]=[v(" Connexion ",-1)])),_:1,__:[21]})])]),l(i)?(d(),n("form",{key:1,class:"mt-8 space-y-6",onSubmit:$(z,["prevent"])},[t("div",K,[t("div",Q,[t("h3",W," Inscription "+g(h(l(i))),1),t("button",{type:"button",onClick:e[3]||(e[3]=o=>i.value=null),class:"text-sm text-gray-500 hover:text-gray-700"}," ← Changer de profil ")]),t("div",X,[t("div",null,[e[28]||(e[28]=t("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"}," Prénom * ",-1)),r(t("input",{id:"first_name","onUpdate:modelValue":e[4]||(e[4]=o=>l(s).first_name=o),name:"first_name",type:"text",required:"",class:"input-field",placeholder:"Prénom"},null,512),[[a,l(s).first_name]])]),t("div",null,[e[29]||(e[29]=t("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"}," Nom * ",-1)),r(t("input",{id:"last_name","onUpdate:modelValue":e[5]||(e[5]=o=>l(s).last_name=o),name:"last_name",type:"text",required:"",class:"input-field",placeholder:"Nom"},null,512),[[a,l(s).last_name]])])]),t("div",null,[e[30]||(e[30]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," Adresse email * ",-1)),r(t("input",{id:"email","onUpdate:modelValue":e[6]||(e[6]=o=>l(s).email=o),name:"email",type:"email",autocomplete:"email",required:"",class:"input-field",placeholder:"Adresse email"},null,512),[[a,l(s).email]])]),t("div",null,[e[31]||(e[31]=t("label",{for:"phone",class:"block text-sm font-medium text-gray-700"}," Téléphone ",-1)),r(t("input",{id:"phone","onUpdate:modelValue":e[7]||(e[7]=o=>l(s).phone=o),name:"phone",type:"tel",class:"input-field",placeholder:"Téléphone"},null,512),[[a,l(s).phone]])]),t("div",null,[e[32]||(e[32]=t("label",{for:"birth_date",class:"block text-sm font-medium text-gray-700"}," Date de naissance ",-1)),r(t("input",{id:"birth_date","onUpdate:modelValue":e[8]||(e[8]=o=>l(s).birth_date=o),name:"birth_date",type:"date",class:"input-field"},null,512),[[a,l(s).birth_date]])]),l(i)==="club"?(d(),n("div",Y,[t("div",null,[e[33]||(e[33]=t("label",{for:"club_name",class:"block text-sm font-medium text-gray-700"}," Nom du club * ",-1)),r(t("input",{id:"club_name","onUpdate:modelValue":e[9]||(e[9]=o=>l(s).club_name=o),name:"club_name",type:"text",required:"",class:"input-field",placeholder:"Nom du club"},null,512),[[a,l(s).club_name]])]),t("div",null,[e[34]||(e[34]=t("label",{for:"club_description",class:"block text-sm font-medium text-gray-700"}," Description du club ",-1)),r(t("textarea",{id:"club_description","onUpdate:modelValue":e[10]||(e[10]=o=>l(s).club_description=o),name:"club_description",rows:"3",class:"input-field",placeholder:"Décrivez votre club..."},null,512),[[a,l(s).club_description]])])])):c("",!0),l(i)==="teacher"?(d(),n("div",Z,[t("div",null,[e[35]||(e[35]=t("label",{for:"specialties",class:"block text-sm font-medium text-gray-700"}," Spécialités ",-1)),t("div",ee,[(d(!0),n(C,null,q(l(A),o=>(d(),n("label",{key:o,class:"flex items-center"},[r(t("input",{"onUpdate:modelValue":e[11]||(e[11]=p=>l(s).specialties=p),value:o,type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,8,te),[[N,l(s).specialties]]),t("span",se,g(o),1)]))),128))])]),t("div",null,[e[36]||(e[36]=t("label",{for:"experience_years",class:"block text-sm font-medium text-gray-700"}," Années d'expérience ",-1)),r(t("input",{id:"experience_years","onUpdate:modelValue":e[12]||(e[12]=o=>l(s).experience_years=o),name:"experience_years",type:"number",min:"0",class:"input-field",placeholder:"Nombre d'années"},null,512),[[a,l(s).experience_years]])])])):c("",!0),t("div",le,[e[43]||(e[43]=t("h4",{class:"text-md font-medium text-gray-700"},"Adresse",-1)),t("div",oe,[t("div",re,[e[37]||(e[37]=t("label",{for:"street",class:"block text-sm text-gray-600 mb-1"},"Rue",-1)),r(t("input",{id:"street","onUpdate:modelValue":e[13]||(e[13]=o=>l(s).street=o),name:"street",type:"text",class:"input-field",placeholder:"Nom de la rue"},null,512),[[a,l(s).street]])]),t("div",null,[e[38]||(e[38]=t("label",{for:"street_number",class:"block text-sm text-gray-600 mb-1"},"Numéro",-1)),r(t("input",{id:"street_number","onUpdate:modelValue":e[14]||(e[14]=o=>l(s).street_number=o),name:"street_number",type:"text",class:"input-field",placeholder:"92, 92/A, 92B..."},null,512),[[a,l(s).street_number]])])]),t("div",ie,[t("div",null,[e[39]||(e[39]=t("label",{for:"postal_code",class:"block text-sm text-gray-600 mb-1"},"Code postal",-1)),r(t("input",{id:"postal_code","onUpdate:modelValue":e[15]||(e[15]=o=>l(s).postal_code=o),name:"postal_code",type:"text",class:"input-field",placeholder:"1000"},null,512),[[a,l(s).postal_code]])]),t("div",null,[e[40]||(e[40]=t("label",{for:"city",class:"block text-sm text-gray-600 mb-1"},"Ville",-1)),r(t("input",{id:"city","onUpdate:modelValue":e[16]||(e[16]=o=>l(s).city=o),name:"city",type:"text",class:"input-field",placeholder:"Bruxelles"},null,512),[[a,l(s).city]])]),t("div",null,[e[42]||(e[42]=t("label",{for:"country",class:"block text-sm text-gray-600 mb-1"},"Pays",-1)),r(t("select",{id:"country","onUpdate:modelValue":e[17]||(e[17]=o=>l(s).country=o),name:"country",class:"input-field"},e[41]||(e[41]=[w('<option value="Belgium">Belgique</option><option value="France">France</option><option value="Netherlands">Pays-Bas</option><option value="Germany">Allemagne</option><option value="Luxembourg">Luxembourg</option><option value="Switzerland">Suisse</option>',6)]),512),[[L,l(s).country]])])])]),t("div",ne,[t("div",null,[e[44]||(e[44]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe * ",-1)),r(t("input",{id:"password","onUpdate:modelValue":e[18]||(e[18]=o=>l(s).password=o),name:"password",type:"password",required:"",class:"input-field",placeholder:"Mot de passe"},null,512),[[a,l(s).password]])]),t("div",null,[e[45]||(e[45]=t("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700"}," Confirmer le mot de passe * ",-1)),r(t("input",{id:"password_confirmation","onUpdate:modelValue":e[19]||(e[19]=o=>l(s).password_confirmation=o),name:"password_confirmation",type:"password",required:"",class:"input-field",placeholder:"Confirmer le mot de passe"},null,512),[[a,l(s).password_confirmation]])])])]),t("div",ae,[r(t("input",{id:"terms","onUpdate:modelValue":e[20]||(e[20]=o=>l(s).terms=o),name:"terms",type:"checkbox",required:"",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded mt-1"},null,512),[[N,l(s).terms]]),e[46]||(e[46]=t("label",{for:"terms",class:"ml-2 block text-sm text-gray-900"},[v(" J'accepte les "),t("a",{href:"#",class:"text-primary-600 hover:text-primary-500"},"conditions d'utilisation"),v(" et la "),t("a",{href:"#",class:"text-primary-600 hover:text-primary-500"},"politique de confidentialité")],-1))]),l(i)==="club"?(d(),n("div",de,e[47]||(e[47]=[w('<div class="flex"><div class="flex-shrink-0"><span class="text-yellow-400">⚠️</span></div><div class="ml-3"><h3 class="text-sm font-medium text-yellow-800"> Validation requise </h3><div class="mt-2 text-sm text-yellow-700"><p>Votre inscription sera soumise à validation par un administrateur. Vous recevrez un email de confirmation une fois approuvée.</p></div></div></div>',1)]))):c("",!0),l(i)==="teacher"?(d(),n("div",ue,e[48]||(e[48]=[w('<div class="flex"><div class="flex-shrink-0"><span class="text-blue-400">ℹ️</span></div><div class="ml-3"><h3 class="text-sm font-medium text-blue-800"> Validation par un club </h3><div class="mt-2 text-sm text-blue-700"><p>Votre inscription sera soumise à validation par un club partenaire. Vous pourrez ensuite proposer vos services.</p></div></div></div>',1)]))):c("",!0),t("div",null,[t("button",{type:"submit",disabled:l(b),class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[l(b)?(d(),n("span",me,"Création du compte...")):(d(),n("span",ce,"S'inscrire comme "+g(h(l(i))),1))],8,pe)]),l(m).length>0?(d(),n("div",be,[t("div",xe,[t("ul",fe,[(d(!0),n(C,null,q(l(m),o=>(d(),n("li",{key:o},g(o),1))),128))])])])):c("",!0)],32)):(d(),n("div",J,[e[27]||(e[27]=t("h3",{class:"text-lg font-medium text-gray-900 text-center"},"Choisissez votre profil",-1)),t("div",H,[t("button",{onClick:e[0]||(e[0]=o=>_("student")),class:"p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors text-left"},e[24]||(e[24]=[t("div",{class:"flex items-center space-x-3"},[t("span",{class:"text-2xl"},"🎓"),t("div",null,[t("h4",{class:"font-medium text-gray-900"},"Élève"),t("p",{class:"text-sm text-gray-600"},"Réservez des cours d'équitation et de natation")])],-1)])),t("button",{onClick:e[1]||(e[1]=o=>_("teacher")),class:"p-4 border-2 border-gray-200 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors text-left"},e[25]||(e[25]=[t("div",{class:"flex items-center space-x-3"},[t("span",{class:"text-2xl"},"👨‍🏫"),t("div",null,[t("h4",{class:"font-medium text-gray-900"},"Enseignant"),t("p",{class:"text-sm text-gray-600"},"Proposez vos services et gérez vos cours")])],-1)])),t("button",{onClick:e[2]||(e[2]=o=>_("club")),class:"p-4 border-2 border-gray-200 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-colors text-left"},e[26]||(e[26]=[t("div",{class:"flex items-center space-x-3"},[t("span",{class:"text-2xl"},"🏢"),t("div",null,[t("h4",{class:"font-medium text-gray-900"},"Club"),t("p",{class:"text-sm text-gray-600"},"Gérez votre centre équestre ou piscine")])],-1)]))])]))])])])}}};export{_e as default};
