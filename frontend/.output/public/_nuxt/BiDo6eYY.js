import{r as b,g as U,c as v,a as t,l as T,p as r,v as d,i as e,m as V,t as u,C as x,o as f}from"./DS9r2nwn.js";import{u as C}from"./17MkyEta.js";const N={class:"min-h-screen bg-gray-50"},h={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},L={class:"bg-white rounded-lg shadow-lg p-6 mb-8"},D={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z={class:"md:col-span-2"},G={class:"mt-6 border-t pt-6"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},P={class:"mt-2"},q={key:0,class:"flex flex-col items-center"},A={class:"border rounded-lg p-4 bg-gray-50"},B=["src"],M={class:"mt-6 flex justify-end"},j=["disabled"],F={class:"bg-white rounded-lg shadow-lg p-6"},$={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},R={class:"bg-blue-50 p-4 rounded"},H={class:"text-2xl font-bold text-blue-600"},J={class:"bg-green-50 p-4 rounded"},K={class:"text-2xl font-bold text-green-600"},O={class:"bg-orange-50 p-4 rounded"},Q={class:"text-2xl font-bold text-orange-600"},Z={__name:"settings",setup(W){const n=b(!1),{settings:l,loadSettings:y,saveSettings:_}=C(),i=b({users:0,teachers:0,students:0}),S=async()=>{try{const{$api:a}=x(),s=await a.get("/admin/stats");s.data&&(i.value=s.data)}catch(a){console.error("Erreur lors du chargement des statistiques:",a)}},w=async()=>{n.value=!0;try{console.log("üîß [SETTINGS] D√©but sauvegarde des param√®tres:",l.value),await _(l.value)?(console.log("‚úÖ [SETTINGS] Param√®tres sauvegard√©s avec succ√®s"),alert("Param√®tres sauvegard√©s avec succ√®s ! Le nom de la plateforme est maintenant mis √† jour dans le header.")):alert("Erreur lors de la sauvegarde. Consultez la console pour plus de d√©tails.")}catch(a){console.error("‚ùå [SETTINGS] Erreur lors de la sauvegarde:",a),alert("Erreur lors de la sauvegarde. Consultez la console pour plus de d√©tails.")}finally{n.value=!1}},E=async a=>{var c;const o=a.target.files;if(!o||o.length===0)return;const k=o[0],p=new FormData;p.append("logo",k);try{const{$api:g}=x(),m=await g.post("/admin/upload-logo",p,{headers:{"Content-Type":"multipart/form-data"}});(c=m.data)!=null&&c.logo_url&&(l.value.logo_url=m.data.logo_url,console.log("‚úÖ Logo upload√© avec succ√®s:",m.data.logo_url))}catch(g){console.error("‚ùå Erreur lors de l'upload du logo:",g),alert("Erreur lors de l'upload du logo")}};return U(()=>{y(),S()}),(a,s)=>(f(),v("div",N,[t("div",h,[s[20]||(s[20]=t("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Param√®tres Syst√®me",-1)),s[21]||(s[21]=t("p",{class:"mb-6 text-gray-600"},"Configuration g√©n√©rale de la plateforme",-1)),t("div",L,[s[15]||(s[15]=t("h2",{class:"text-xl font-semibold mb-4"},"Param√®tres g√©n√©raux",-1)),t("form",{onSubmit:T(w,["prevent"])},[t("div",D,[t("div",null,[s[6]||(s[6]=t("label",{class:"block text-gray-700 mb-1"},"Nom de la plateforme",-1)),r(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>e(l).platform_name=o),class:"input-field",required:""},null,512),[[d,e(l).platform_name]])]),t("div",null,[s[7]||(s[7]=t("label",{class:"block text-gray-700 mb-1"},"Email de contact",-1)),r(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>e(l).contact_email=o),class:"input-field",required:"",type:"email"},null,512),[[d,e(l).contact_email]])]),t("div",null,[s[8]||(s[8]=t("label",{class:"block text-gray-700 mb-1"},"T√©l√©phone de contact",-1)),r(t("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>e(l).contact_phone=o),class:"input-field"},null,512),[[d,e(l).contact_phone]])]),t("div",null,[s[9]||(s[9]=t("label",{class:"block text-gray-700 mb-1"},"Fuseau horaire",-1)),r(t("input",{"onUpdate:modelValue":s[3]||(s[3]=o=>e(l).timezone=o),class:"input-field"},null,512),[[d,e(l).timezone]])]),t("div",z,[s[10]||(s[10]=t("label",{class:"block text-gray-700 mb-1"},"Adresse de la soci√©t√©",-1)),r(t("textarea",{"onUpdate:modelValue":s[4]||(s[4]=o=>e(l).company_address=o),class:"input-field",rows:"3"},null,512),[[d,e(l).company_address]])])]),t("div",G,[s[14]||(s[14]=t("h3",{class:"text-lg font-semibold mb-4"},"Logo de la plateforme",-1)),t("div",I,[t("div",null,[s[12]||(s[12]=t("label",{class:"block text-gray-700 mb-1"},"URL du logo",-1)),r(t("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>e(l).logo_url=o),class:"input-field",placeholder:"https://..."},null,512),[[d,e(l).logo_url]]),t("div",P,[s[11]||(s[11]=t("label",{class:"block text-gray-700 mb-1"},"Uploader un logo",-1)),t("input",{type:"file",accept:"image/*",onChange:E,class:"input-field"},null,32)])]),e(l).logo_url?(f(),v("div",q,[s[13]||(s[13]=t("span",{class:"text-sm text-gray-600 mb-2"},"Aper√ßu actuel",-1)),t("div",A,[t("img",{src:e(l).logo_url,alt:"Logo",class:"h-16 w-auto max-w-full"},null,8,B)])])):V("",!0)])]),t("div",M,[t("button",{type:"submit",class:"btn-primary",disabled:e(n)},u(e(n)?"Sauvegarde...":"Sauvegarder"),9,j)])],32)]),t("div",F,[s[19]||(s[19]=t("h2",{class:"text-xl font-semibold mb-4"},"Informations syst√®me",-1)),t("div",$,[t("div",R,[t("div",H,u(e(i).users||0),1),s[16]||(s[16]=t("div",{class:"text-sm text-gray-600"},"Utilisateurs total",-1))]),t("div",J,[t("div",K,u(e(i).teachers||0),1),s[17]||(s[17]=t("div",{class:"text-sm text-gray-600"},"Enseignants",-1))]),t("div",O,[t("div",Q,u(e(i).students||0),1),s[18]||(s[18]=t("div",{class:"text-sm text-gray-600"},"√âtudiants",-1))])])])])]))}};export{Z as default};
