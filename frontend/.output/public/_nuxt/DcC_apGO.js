import{B as x,h as f,x as y,s as $,c as n,a as t,d as p,t as u,m as l,F as v,p as A,ac as w,o as i}from"./CplJ7MsP.js";const T={class:"p-8"},S={class:"bg-gray-100 p-4 rounded mb-4"},B={class:"bg-black text-green-400 p-4 rounded font-mono text-sm max-h-96 overflow-y-auto"},I={__name:"test-api-direct",setup(P){const o=$(),{$api:d}=x(),r=f([]);let g=0;function e(s){r.value.push({id:g++,message:`[${new Date().toLocaleTimeString()}] ${s}`})}async function m(){e("🔧 Test avec $api (plugin Nuxt)...");try{const s=await d.post("/auth/login",{email:"admin.secours@activibe.com",password:"secours123"});e(`✅ Succès: ${s.data.user.role}`)}catch(s){e(`❌ Erreur $api: ${s.message}`),s.response&&(e(`   Status: ${s.response.status}`),e(`   Data: ${JSON.stringify(s.response.data)}`))}}async function b(){e("🔧 Test avec Axios direct...");try{const s=await w.post(`${o.public.apiBase}/auth/login`,{email:"admin.secours@activibe.com",password:"secours123"},{headers:{"Content-Type":"application/json",Accept:"application/json"}});e(`✅ Succès Axios: ${s.data.user.role}`)}catch(s){e(`❌ Erreur Axios: ${s.message}`),s.response&&(e(`   Status: ${s.response.status}`),e(`   Data: ${JSON.stringify(s.response.data)}`))}}async function h(){e("🔧 Test avec Fetch API...");try{const s=await fetch(`${o.public.apiBase}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:"admin.secours@activibe.com",password:"secours123"})});if(!s.ok)throw new Error(`HTTP ${s.status}`);const a=await s.json();e(`✅ Succès Fetch: ${a.user.role}`)}catch(s){e(`❌ Erreur Fetch: ${s.message}`)}}return y(()=>{e("🚀 Page de test API chargée"),e(`🌐 API Base: ${o.public.apiBase}`)}),(s,a)=>(i(),n("div",T,[a[3]||(a[3]=t("h1",{class:"text-2xl font-bold mb-4"},"🔧 Test Direct API",-1)),t("div",S,[a[1]||(a[1]=t("h2",{class:"text-lg font-semibold mb-2"},"Configuration",-1)),t("p",null,[a[0]||(a[0]=t("strong",null,"API Base:",-1)),p(" "+u(l(o).public.apiBase),1)]),a[2]||(a[2]=t("p",null,[t("strong",null,"Endpoint:"),p(" /auth/login")],-1))]),t("div",{class:"space-y-2 mb-4"},[t("button",{onClick:m,class:"bg-blue-500 text-white px-4 py-2 rounded mr-2"},"Test API Direct"),t("button",{onClick:b,class:"bg-green-500 text-white px-4 py-2 rounded mr-2"},"Test avec Axios"),t("button",{onClick:h,class:"bg-purple-500 text-white px-4 py-2 rounded"},"Test avec Fetch")]),t("div",B,[(i(!0),n(v,null,A(l(r),c=>(i(),n("div",{key:c.id},u(c.message),1))),128))])]))}};export{I as default};
