import{h as b,B as v,x as y,c as f,a as s,j as S,l as o,v as n,m as e,t as c,o as _}from"./C0TLcctm.js";const k=()=>{const m=b({platform_name:"activibe",contact_email:"contact@activibe.fr",contact_phone:"+32 2 123 45 67",company_address:`Rue de l'√âquitation 123
1000 Bruxelles
Belgique`,timezone:"Europe/Brussels",logo_url:"/logo-activibe.svg",favicon_url:"/favicon.ico"});return{settings:m,loadSettings:async()=>{try{const{$api:r}=v(),i=await r.get("/admin/settings/general");i.data&&(m.value={...m.value,...i.data})}catch(r){console.warn("Impossible de charger les param√®tres:",r)}},saveSettings:async r=>{var i;try{const{$api:d}=v(),g=await d.put("/admin/settings/general",r);return(i=g.data)!=null&&i.message?(m.value={...m.value,...r},console.log("‚úÖ Param√®tres sauvegard√©s:",g.data.message),!0):!1}catch(d){return console.error("‚ùå Erreur lors de la sauvegarde:",d),!1}}}},E={class:"min-h-screen bg-gray-50"},V={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},w={class:"bg-white rounded-lg shadow-lg p-6 mb-8"},U={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},N={class:"md:col-span-2"},T={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},B={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},P={class:"form-button-group"},q=["disabled"],z={class:"bg-white rounded-lg shadow-lg p-6"},C={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},I={class:"bg-blue-50 p-4 rounded"},G={class:"text-2xl font-bold text-blue-600"},D={class:"bg-green-50 p-4 rounded"},M={class:"text-2xl font-bold text-green-600"},$={class:"bg-orange-50 p-4 rounded"},j={class:"text-2xl font-bold text-orange-600"},F={__name:"settings",setup(m){const p=b(!1),{settings:l,loadSettings:r,saveSettings:i}=k(),d=b({users:0,teachers:0,students:0}),g=async()=>{try{const{$api:u}=v(),t=await u.get("/admin/stats");t.data.stats&&(d.value={users:t.data.stats.total_users||0,teachers:t.data.stats.total_teachers||0,students:t.data.stats.total_students||0})}catch(u){console.error("Erreur lors du chargement des statistiques:",u)}},x=async()=>{p.value=!0;try{console.log("üîß [SETTINGS] D√©but sauvegarde des param√®tres:",l.value),await i(l.value)?(console.log("‚úÖ [SETTINGS] Param√®tres sauvegard√©s avec succ√®s"),alert("Param√®tres sauvegard√©s avec succ√®s ! Le nom de la plateforme est maintenant mis √† jour dans le header.")):alert("Erreur lors de la sauvegarde. Consultez la console pour plus de d√©tails.")}catch(u){console.error("‚ùå [SETTINGS] Erreur lors de la sauvegarde:",u),alert("Erreur lors de la sauvegarde. Consultez la console pour plus de d√©tails.")}finally{p.value=!1}};return y(()=>{r(),g()}),(u,t)=>(_(),f("div",E,[s("div",V,[t[24]||(t[24]=s("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Param√®tres Syst√®me",-1)),t[25]||(t[25]=s("p",{class:"mb-6 text-gray-600"},"Configuration g√©n√©rale de la plateforme",-1)),s("div",w,[t[19]||(t[19]=s("h2",{class:"text-xl font-semibold mb-4"},"Param√®tres g√©n√©raux",-1)),s("form",{onSubmit:S(x,["prevent"])},[s("div",U,[s("div",null,[t[9]||(t[9]=s("label",{class:"block text-gray-700 mb-1"},"Nom de la plateforme",-1)),o(s("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>e(l).platform_name=a),class:"input-field",required:""},null,512),[[n,e(l).platform_name]])]),s("div",null,[t[10]||(t[10]=s("label",{class:"block text-gray-700 mb-1"},"Email de contact",-1)),o(s("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>e(l).contact_email=a),class:"input-field",required:"",type:"email"},null,512),[[n,e(l).contact_email]])]),s("div",null,[t[11]||(t[11]=s("label",{class:"block text-gray-700 mb-1"},"T√©l√©phone de contact",-1)),o(s("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>e(l).contact_phone=a),class:"input-field"},null,512),[[n,e(l).contact_phone]])]),s("div",null,[t[12]||(t[12]=s("label",{class:"block text-gray-700 mb-1"},"Fuseau horaire",-1)),o(s("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>e(l).timezone=a),class:"input-field"},null,512),[[n,e(l).timezone]])]),s("div",N,[t[18]||(t[18]=s("label",{class:"block text-gray-700 mb-1"},"Adresse de la soci√©t√©",-1)),s("div",T,[s("div",null,[t[13]||(t[13]=s("label",{class:"block text-sm text-gray-600 mb-1"},"Rue",-1)),o(s("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>e(l).company_street=a),class:"input-field",placeholder:"Nom de la rue"},null,512),[[n,e(l).company_street]])]),s("div",null,[t[14]||(t[14]=s("label",{class:"block text-sm text-gray-600 mb-1"},"Num√©ro",-1)),o(s("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>e(l).company_street_number=a),class:"input-field",placeholder:"Num√©ro"},null,512),[[n,e(l).company_street_number]])])]),s("div",B,[s("div",null,[t[15]||(t[15]=s("label",{class:"block text-sm text-gray-600 mb-1"},"Code postal",-1)),o(s("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>e(l).company_postal_code=a),class:"input-field",placeholder:"Code postal"},null,512),[[n,e(l).company_postal_code]])]),s("div",null,[t[16]||(t[16]=s("label",{class:"block text-sm text-gray-600 mb-1"},"Ville",-1)),o(s("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>e(l).company_city=a),class:"input-field",placeholder:"Ville"},null,512),[[n,e(l).company_city]])]),s("div",null,[t[17]||(t[17]=s("label",{class:"block text-sm text-gray-600 mb-1"},"Pays",-1)),o(s("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>e(l).company_country=a),class:"input-field",placeholder:"France"},null,512),[[n,e(l).company_country]])])])])]),s("div",P,[s("button",{type:"submit",class:"btn-primary",disabled:e(p)},c(e(p)?"Sauvegarde...":"Sauvegarder"),9,q)])],32)]),s("div",z,[t[23]||(t[23]=s("h2",{class:"text-xl font-semibold mb-4"},"Informations syst√®me",-1)),s("div",C,[s("div",I,[s("div",G,c(e(d).users||0),1),t[20]||(t[20]=s("div",{class:"text-sm text-gray-600"},"Utilisateurs total",-1))]),s("div",D,[s("div",M,c(e(d).teachers||0),1),t[21]||(t[21]=s("div",{class:"text-sm text-gray-600"},"Enseignants",-1))]),s("div",$,[s("div",j,c(e(d).students||0),1),t[22]||(t[22]=s("div",{class:"text-sm text-gray-600"},"√âtudiants",-1))])])])])]))}};export{F as default};
