import{D as x,r as y,g as f,y as $,c as n,a as t,d as u,t as p,i as l,F as A,x as w,Z as T,o as r}from"./B73CQWOX.js";const v={class:"p-8"},k={class:"bg-gray-100 p-4 rounded mb-4"},S={class:"bg-black text-green-400 p-4 rounded font-mono text-sm max-h-96 overflow-y-auto"},D={__name:"test-api-direct",setup(P){const a=$(),{$api:d}=x(),i=y([]);let g=0;function e(s){i.value.push({id:g++,message:`[${new Date().toLocaleTimeString()}] ${s}`})}async function m(){e("🔧 Test avec $api (plugin Nuxt)...");try{const s=await d.post("/auth/login",{email:"admin.secours@bookyourcoach.com",password:"secours123"});e(`✅ Succès: ${s.data.user.role}`)}catch(s){e(`❌ Erreur $api: ${s.message}`),s.response&&(e(`   Status: ${s.response.status}`),e(`   Data: ${JSON.stringify(s.response.data)}`))}}async function h(){e("🔧 Test avec Axios direct...");try{const s=await T.post(`${a.public.apiBase}/auth/login`,{email:"admin.secours@bookyourcoach.com",password:"secours123"},{headers:{"Content-Type":"application/json",Accept:"application/json"}});e(`✅ Succès Axios: ${s.data.user.role}`)}catch(s){e(`❌ Erreur Axios: ${s.message}`),s.response&&(e(`   Status: ${s.response.status}`),e(`   Data: ${JSON.stringify(s.response.data)}`))}}async function b(){e("🔧 Test avec Fetch API...");try{const s=await fetch(`${a.public.apiBase}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:"admin.secours@bookyourcoach.com",password:"secours123"})});if(!s.ok)throw new Error(`HTTP ${s.status}`);const o=await s.json();e(`✅ Succès Fetch: ${o.user.role}`)}catch(s){e(`❌ Erreur Fetch: ${s.message}`)}}return f(()=>{e("🚀 Page de test API chargée"),e(`🌐 API Base: ${a.public.apiBase}`)}),(s,o)=>(r(),n("div",v,[o[3]||(o[3]=t("h1",{class:"text-2xl font-bold mb-4"},"🔧 Test Direct API",-1)),t("div",k,[o[1]||(o[1]=t("h2",{class:"text-lg font-semibold mb-2"},"Configuration",-1)),t("p",null,[o[0]||(o[0]=t("strong",null,"API Base:",-1)),u(" "+p(l(a).public.apiBase),1)]),o[2]||(o[2]=t("p",null,[t("strong",null,"Endpoint:"),u(" /auth/login")],-1))]),t("div",{class:"space-y-2 mb-4"},[t("button",{onClick:m,class:"bg-blue-500 text-white px-4 py-2 rounded mr-2"},"Test API Direct"),t("button",{onClick:h,class:"bg-green-500 text-white px-4 py-2 rounded mr-2"},"Test avec Axios"),t("button",{onClick:b,class:"bg-purple-500 text-white px-4 py-2 rounded"},"Test avec Fetch")]),t("div",S,[(r(!0),n(A,null,w(l(i),c=>(r(),n("div",{key:c.id},p(c.message),1))),128))])]))}};export{D as default};
