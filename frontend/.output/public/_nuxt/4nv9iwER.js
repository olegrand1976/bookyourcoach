import{Y as h,u as U,r as c,g as S,c as f,o as x,a as s,l as C,p as r,v as d,i as e,m as E,t as u,C as g}from"./B2BDWZP7.js";const V={class:"min-h-screen bg-gray-50"},B={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},L={class:"bg-white rounded-lg shadow-lg p-6 mb-8"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},D={class:"md:col-span-2"},N={class:"mt-6 border-t pt-6"},P={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$={class:"mt-2"},z={key:0,class:"flex flex-col items-center"},A={class:"border rounded-lg p-4 bg-gray-50"},M=["src"],T={class:"mt-6 flex justify-end"},Y=["disabled"],j={class:"bg-white rounded-lg shadow-lg p-6"},F={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},G={class:"bg-blue-50 p-4 rounded"},H={class:"text-2xl font-bold text-blue-600"},I={class:"bg-green-50 p-4 rounded"},O={class:"text-2xl font-bold text-green-600"},R={class:"bg-orange-50 p-4 rounded"},J={class:"text-2xl font-bold text-orange-600"},W=h({__name:"settings",setup(K){U({title:"Paramètres Système"});const n=c(!1),o=c({platform_name:"BookYourCoach",contact_email:"contact@bookyourcoach.fr",contact_phone:"+33 1 23 45 67 89",timezone:"Europe/Brussels",company_address:`BookYourCoach
Belgique`,logo_url:"/logo.svg"}),i=c({users:0,teachers:0,students:0}),v=async()=>{try{const{$api:a}=g(),t=await a.get("/admin/settings");t.data&&t.data.settings&&Object.assign(o.value,t.data.settings)}catch(a){console.error("Erreur lors du chargement des paramètres:",a)}},y=async()=>{try{const{$api:a}=g(),t=await a.get("/admin/stats");t.data&&(i.value=t.data)}catch(a){console.error("Erreur lors du chargement des statistiques:",a)}},_=async()=>{n.value=!0;try{const{$api:a}=g();await a.post("/admin/settings",{type:"general",settings:o.value}),console.log("Paramètres sauvegardés avec succès")}catch(a){console.error("Erreur lors de la sauvegarde:",a)}finally{n.value=!1}},w=async a=>{const l=a.target.files;if(!l||l.length===0)return;const k=l[0],b=new FormData;b.append("logo",k);try{n.value=!0;const{$api:m}=g(),p=await m.post("/admin/upload-logo",b,{headers:{"Content-Type":"multipart/form-data"}});p.data&&p.data.url&&(o.value.logo_url=p.data.url,console.log("Logo uploadé avec succès"))}catch(m){console.error("Erreur lors de l'upload du logo:",m)}finally{n.value=!1}};return S(()=>{v(),y()}),(a,t)=>(x(),f("div",V,[s("div",B,[t[20]||(t[20]=s("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Paramètres Système",-1)),t[21]||(t[21]=s("p",{class:"mb-6 text-gray-600"},"Configuration générale de la plateforme",-1)),s("div",L,[t[15]||(t[15]=s("h2",{class:"text-xl font-semibold mb-4"},"Paramètres généraux",-1)),s("form",{onSubmit:C(_,["prevent"])},[s("div",q,[s("div",null,[t[6]||(t[6]=s("label",{class:"block text-gray-700 mb-1"},"Nom de la plateforme",-1)),r(s("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>e(o).platform_name=l),class:"input-field",required:""},null,512),[[d,e(o).platform_name]])]),s("div",null,[t[7]||(t[7]=s("label",{class:"block text-gray-700 mb-1"},"Email de contact",-1)),r(s("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>e(o).contact_email=l),class:"input-field",required:"",type:"email"},null,512),[[d,e(o).contact_email]])]),s("div",null,[t[8]||(t[8]=s("label",{class:"block text-gray-700 mb-1"},"Téléphone de contact",-1)),r(s("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>e(o).contact_phone=l),class:"input-field"},null,512),[[d,e(o).contact_phone]])]),s("div",null,[t[9]||(t[9]=s("label",{class:"block text-gray-700 mb-1"},"Fuseau horaire",-1)),r(s("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>e(o).timezone=l),class:"input-field"},null,512),[[d,e(o).timezone]])]),s("div",D,[t[10]||(t[10]=s("label",{class:"block text-gray-700 mb-1"},"Adresse de la société",-1)),r(s("textarea",{"onUpdate:modelValue":t[4]||(t[4]=l=>e(o).company_address=l),class:"input-field",rows:"3"},null,512),[[d,e(o).company_address]])])]),s("div",N,[t[14]||(t[14]=s("h3",{class:"text-lg font-semibold mb-4"},"Logo de la plateforme",-1)),s("div",P,[s("div",null,[t[12]||(t[12]=s("label",{class:"block text-gray-700 mb-1"},"URL du logo",-1)),r(s("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>e(o).logo_url=l),class:"input-field",placeholder:"https://..."},null,512),[[d,e(o).logo_url]]),s("div",$,[t[11]||(t[11]=s("label",{class:"block text-gray-700 mb-1"},"Uploader un logo",-1)),s("input",{type:"file",accept:"image/*",onChange:w,class:"input-field"},null,32)])]),e(o).logo_url?(x(),f("div",z,[t[13]||(t[13]=s("span",{class:"text-sm text-gray-600 mb-2"},"Aperçu actuel",-1)),s("div",A,[s("img",{src:e(o).logo_url,alt:"Logo",class:"h-16 w-auto max-w-full"},null,8,M)])])):E("",!0)])]),s("div",T,[s("button",{type:"submit",class:"btn-primary",disabled:e(n)},u(e(n)?"Sauvegarde...":"Sauvegarder"),9,Y)])],32)]),s("div",j,[t[19]||(t[19]=s("h2",{class:"text-xl font-semibold mb-4"},"Informations système",-1)),s("div",F,[s("div",G,[s("div",H,u(e(i).users||0),1),t[16]||(t[16]=s("div",{class:"text-sm text-gray-600"},"Utilisateurs total",-1))]),s("div",I,[s("div",O,u(e(i).teachers||0),1),t[17]||(t[17]=s("div",{class:"text-sm text-gray-600"},"Enseignants",-1))]),s("div",R,[s("div",J,u(e(i).students||0),1),t[18]||(t[18]=s("div",{class:"text-sm text-gray-600"},"Étudiants",-1))])])])])]))}});export{W as default};
