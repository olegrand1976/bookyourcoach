import{h as d,c,a as s,k as f,l as y,v as w,m as t,E as k,t as b,B as _,s as C,o as v}from"./CplJ7MsP.js";const E={class:"min-h-screen bg-gray-50 p-8"},B={class:"max-w-md mx-auto bg-white rounded-lg shadow-md p-6"},T={class:"space-y-4"},N=["disabled"],R={key:0,class:"mt-6 p-4 bg-gray-100 rounded-md"},V={class:"text-sm"},S={key:1,class:"mt-6 p-4 bg-red-100 border border-red-300 rounded-md"},U={class:"text-red-700"},D={__name:"test-login",setup($){const n=d("sophie.martin@activibe.com"),i=d("password"),u=d(!1),r=d(null),a=d(""),h=async()=>{var m,e,l,g,x;u.value=!0,r.value=null,a.value="";try{const{$api:o}=_();console.log("ðŸ”‘ Test de connexion avec:",{email:n.value,password:"***"}),console.log("ðŸ”‘ URL de base API:",C().public.apiBase);const p=await o.post("/auth/login",{email:n.value,password:i.value});r.value={success:!0,message:"Connexion rÃ©ussie !",user:p.data.user,token:((m=p.data.token)==null?void 0:m.substring(0,20))+"..."},console.log("âœ… Connexion rÃ©ussie:",p.data)}catch(o){console.error("âŒ Erreur de connexion:",o),a.value=`Erreur: ${o.message}`,(l=(e=o.response)==null?void 0:e.data)!=null&&l.message&&(a.value=o.response.data.message),(g=o.response)!=null&&g.status&&(a.value+=` (Status: ${o.response.status})`),r.value={success:!1,error:a.value,details:(x=o.response)==null?void 0:x.data}}finally{u.value=!1}};return(m,e)=>(v(),c("div",E,[s("div",B,[e[6]||(e[6]=s("h1",{class:"text-2xl font-bold mb-6"},"Test de Connexion",-1)),s("div",T,[s("div",null,[e[2]||(e[2]=s("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),y(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>k(n)?n.value=l:null),type:"email",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"sophie.martin@activibe.com"},null,512),[[w,t(n)]])]),s("div",null,[e[3]||(e[3]=s("label",{class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),y(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>k(i)?i.value=l:null),type:"password",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"password"},null,512),[[w,t(i)]])]),s("button",{onClick:h,disabled:t(u),class:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 disabled:opacity-50"},b(t(u)?"Test en cours...":"Tester la connexion"),9,N)]),t(r)?(v(),c("div",R,[e[4]||(e[4]=s("h3",{class:"font-semibold mb-2"},"RÃ©sultat :",-1)),s("pre",V,b(JSON.stringify(t(r),null,2)),1)])):f("",!0),t(a)?(v(),c("div",S,[e[5]||(e[5]=s("h3",{class:"font-semibold text-red-800 mb-2"},"Erreur :",-1)),s("p",U,b(t(a)),1)])):f("",!0)])]))}};export{D as default};
