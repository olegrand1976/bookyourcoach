import{h,x as H,c as d,o as u,a as e,e as m,j as N,k,l as n,d as g,v,z as _,F as j,p as V,H as F,n as O,t as x,s as M,A as z}from"./ROMuWq-R.js";import{u as A}from"./y45lfyPG.js";const I={class:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4"},L={class:"relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden"},P={class:"bg-gradient-to-r from-emerald-500 to-teal-600 px-6 py-4"},R={class:"flex items-center justify-between"},J={class:"overflow-y-auto max-h-[calc(90vh-120px)]"},G={class:"bg-gray-50 rounded-xl p-6"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q={class:"space-y-2"},W={class:"space-y-2"},X={class:"space-y-2"},Y={class:"space-y-2"},Z={key:0,class:"bg-blue-50 rounded-xl p-6"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},te=["onClick"],oe=["id","value"],se=["for"],le={class:"text-2xl mr-3"},re={class:"font-medium text-gray-900"},ae={class:"text-sm text-gray-500"},ne={class:"bg-purple-50 rounded-xl p-6"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},de={class:"space-y-2"},ue={class:"space-y-2"},ce={class:"bg-amber-50 rounded-xl p-6"},pe={key:0,class:"space-y-4"},me={class:"flex items-center justify-between mb-4"},ve={class:"flex items-center space-x-3"},fe={class:"font-medium text-gray-900"},ge=["onClick"],xe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},be={class:"space-y-2"},ye=["onUpdate:modelValue"],he={class:"space-y-2"},we=["onUpdate:modelValue"],ke={class:"space-y-2"},_e=["onUpdate:modelValue"],Ce={class:"space-y-2"},je={class:"relative"},Ve=["onChange"],Me={key:0,class:"mt-2 text-sm text-emerald-600 flex items-center"},ze={class:"mt-4 space-y-2"},Ae=["onUpdate:modelValue"],Be={key:1,class:"text-center py-8 text-gray-500"},$e={class:"flex justify-end space-x-4 pt-6 border-t border-gray-200"},De=["disabled"],Ue={key:0,class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},Ee={__name:"AddStudentModal",emits:["close","success"],setup(Se,{emit:B}){const C=B,b=h(!1),w=h([]),p=h([]),c=h([]),l=h({name:"",email:"",phone:"",level:"",goals:"",medical_info:""}),$=async()=>{try{const s=M(),t=z("auth-token"),o=await $fetch(`${s.public.apiBase}/club/profile-test`);o.club&&o.club.disciplines&&(w.value=o.club.disciplines)}catch(s){console.error("Erreur lors du chargement des sp√©cialit√©s:",s)}},D=s=>({1:"üèá",2:"üèä‚Äç‚ôÄÔ∏è",3:"üí™",4:"üèÉ‚Äç‚ôÇÔ∏è"})[s]||"üéØ",U=s=>{const t=p.value.indexOf(s);t>-1?p.value.splice(t,1):p.value.push(s)},S=()=>{c.value.push({document_type:"",file_path:"",file_name:"",expiry_date:"",renewal_frequency:"",notes:"",file:null})},T=s=>{c.value.splice(s,1)},q=(s,t)=>{const o=s.target.files[0];o&&(c.value[t].file=o,c.value[t].file_name=o.name)},E=async()=>{b.value=!0;try{const s=M(),t=z("auth-token"),o={...l.value,disciplines:p.value,medical_documents:c.value.filter(a=>a.document_type&&a.file)},i=await $fetch(`${s.public.apiBase}/club/students-test`,{method:"POST",headers:{Authorization:`Bearer ${t.value}`,"Content-Type":"application/json"},body:o});if(console.log("‚úÖ √âtudiant cr√©√© avec succ√®s:",i),c.value.some(a=>a.file)){const a=new FormData;c.value.forEach((f,y)=>{f.file&&(a.append(`documents[${y}][file]`,f.file),a.append(`documents[${y}][document_type]`,f.document_type),a.append(`documents[${y}][expiry_date]`,f.expiry_date||""),a.append(`documents[${y}][renewal_frequency]`,f.renewal_frequency||""),a.append(`documents[${y}][notes]`,f.notes||""))}),await $fetch(`${s.public.apiBase}/club/students/${i.student.id}/medical-documents`,{method:"POST",headers:{Authorization:`Bearer ${t.value}`},body:a})}const{showToast:r}=A();r("√âtudiant cr√©√© avec succ√®s !","success"),C("success"),C("close")}catch(s){console.error("‚ùå Erreur lors de l'ajout de l'√©l√®ve:",s);const{showToast:t}=A();t("Erreur lors de la cr√©ation de l'√©tudiant","error")}finally{b.value=!1}};return H(()=>{$()}),(s,t)=>(u(),d("div",I,[e("div",L,[e("div",P,[e("div",R,[t[10]||(t[10]=m('<div class="flex items-center space-x-3"><div class="bg-white bg-opacity-20 p-2 rounded-lg"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path></svg></div><div><h3 class="text-xl font-bold text-white">Ajouter un nouvel √©l√®ve</h3><p class="text-emerald-100 text-sm">Remplissez les informations ci-dessous</p></div></div>',1)),e("button",{onClick:t[0]||(t[0]=o=>s.$emit("close")),class:"text-white hover:text-emerald-200 transition-colors p-2 hover:bg-white hover:bg-opacity-20 rounded-lg"},t[9]||(t[9]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),e("div",J,[e("form",{onSubmit:N(E,["prevent"]),class:"p-6 space-y-8"},[e("div",G,[t[16]||(t[16]=m('<div class="flex items-center mb-4"><div class="bg-emerald-100 p-2 rounded-lg mr-3"><svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div><h4 class="text-lg font-semibold text-gray-900">Informations personnelles</h4></div>',1)),e("div",K,[e("div",Q,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700"},[g(" Nom complet "),e("span",{class:"text-red-500"},"*")],-1)),n(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.name=o),type:"text",required:"",placeholder:"Ex: Jean Dupont",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"},null,512),[[v,l.value.name]])]),e("div",W,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700"},[g(" Email "),e("span",{class:"text-red-500"},"*")],-1)),n(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.email=o),type:"email",required:"",placeholder:"Ex: jean.dupont@email.com",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"},null,512),[[v,l.value.email]])]),e("div",X,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"T√©l√©phone",-1)),n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.phone=o),type:"tel",placeholder:"Ex: 06 12 34 56 78",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"},null,512),[[v,l.value.phone]])]),e("div",Y,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700"},[g(" Niveau "),e("span",{class:"text-gray-500 text-xs"},"(facultatif)")],-1)),n(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.level=o),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"},t[14]||(t[14]=[m('<option value="">S√©lectionner un niveau</option><option value="debutant">üå± D√©butant</option><option value="intermediaire">üìà Interm√©diaire</option><option value="avance">‚≠ê Avanc√©</option><option value="expert">üèÜ Expert</option>',5)]),512),[[_,l.value.level]])])])]),w.value.length>0?(u(),d("div",Z,[t[17]||(t[17]=m('<div class="flex items-center mb-4"><div class="bg-blue-100 p-2 rounded-lg mr-3"><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path></svg></div><h4 class="text-lg font-semibold text-gray-900">Sp√©cialit√©s d&#39;int√©r√™t</h4></div>',1)),e("div",ee,[(u(!0),d(j,null,V(w.value,o=>(u(),d("div",{key:o.id,class:F(["flex items-center p-4 border-2 rounded-xl cursor-pointer transition-all duration-200 hover:shadow-md",p.value.includes(o.id)?"border-emerald-500 bg-emerald-50 shadow-md":"border-gray-200 bg-white hover:border-gray-300"]),onClick:i=>U(o.id)},[n(e("input",{id:"discipline-"+o.id,"onUpdate:modelValue":t[5]||(t[5]=i=>p.value=i),value:o.id,type:"checkbox",class:"h-5 w-5 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"},null,8,oe),[[O,p.value]]),e("label",{for:"discipline-"+o.id,class:"ml-4 flex items-center cursor-pointer flex-1"},[e("span",le,x(D(o.activity_type_id)),1),e("div",null,[e("div",re,x(o.name),1),e("div",ae,x(o.description),1)])],8,se)],10,te))),128))])])):k("",!0),e("div",ne,[t[20]||(t[20]=m('<div class="flex items-center mb-4"><div class="bg-purple-100 p-2 rounded-lg mr-3"><svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div><h4 class="text-lg font-semibold text-gray-900">Objectifs et informations m√©dicales</h4></div>',1)),e("div",ie,[e("div",de,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700"},[g(" Objectifs "),e("span",{class:"text-gray-500 text-xs"},"(facultatif)")],-1)),n(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=o=>l.value.goals=o),rows:"4",placeholder:"D√©crivez les objectifs de l'√©l√®ve...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors resize-none"},null,512),[[v,l.value.goals]])]),e("div",ue,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700"},[g(" Informations m√©dicales "),e("span",{class:"text-gray-500 text-xs"},"(facultatif)")],-1)),n(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=o=>l.value.medical_info=o),rows:"4",placeholder:"Allergies, limitations, informations importantes...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors resize-none"},null,512),[[v,l.value.medical_info]])])])]),e("div",ce,[e("div",{class:"flex items-center justify-between mb-4"},[t[22]||(t[22]=m('<div class="flex items-center"><div class="bg-amber-100 p-2 rounded-lg mr-3"><svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><div><h4 class="text-lg font-semibold text-gray-900">Documents m√©dicaux</h4><p class="text-sm text-gray-600">Ajoutez les documents n√©cessaires (certificats, assurances...)</p></div></div>',1)),e("button",{type:"button",onClick:S,class:"bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors"},t[21]||(t[21]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",null,"Ajouter",-1)]))]),c.value.length>0?(u(),d("div",pe,[(u(!0),d(j,null,V(c.value,(o,i)=>(u(),d("div",{key:i,class:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow"},[e("div",me,[e("div",ve,[t[23]||(t[23]=e("div",{class:"bg-blue-100 p-2 rounded-lg"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("h5",fe,"Document "+x(i+1),1)]),e("button",{type:"button",onClick:r=>T(i),class:"text-red-500 hover:text-red-700 p-1 hover:bg-red-50 rounded-lg transition-colors"},t[24]||(t[24]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,ge)]),e("div",xe,[e("div",be,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700"},"Type de document",-1)),n(e("select",{"onUpdate:modelValue":r=>o.document_type=r,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},t[25]||(t[25]=[m('<option value="">S√©lectionner un type</option><option value="certificat_medical">üè• Certificat m√©dical</option><option value="assurance">üõ°Ô∏è Assurance</option><option value="autorisation_parentale">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Autorisation parentale</option><option value="autre">üìÑ Autre</option>',5)]),8,ye),[[_,o.document_type]])]),e("div",he,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Fr√©quence de renouvellement",-1)),n(e("select",{"onUpdate:modelValue":r=>o.renewal_frequency=r,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},t[27]||(t[27]=[e("option",{value:""},"Aucune",-1),e("option",{value:"yearly"},"üìÖ Annuel",-1),e("option",{value:"monthly"},"üìÜ Mensuel",-1),e("option",{value:"quarterly"},"üìä Trimestriel",-1)]),8,we),[[_,o.renewal_frequency]])]),e("div",ke,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date d'expiration",-1)),n(e("input",{"onUpdate:modelValue":r=>o.expiry_date=r,type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},null,8,_e),[[v,o.expiry_date]])]),e("div",Ce,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700"},"Fichier",-1)),e("div",je,[e("input",{onChange:r=>q(r,i),type:"file",accept:".pdf,.jpg,.jpeg,.png",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},null,40,Ve),o.file_name?(u(),d("div",Me,[t[30]||(t[30]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),g(" "+x(o.file_name),1)])):k("",!0)])])]),e("div",ze,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700"},"Notes",-1)),n(e("textarea",{"onUpdate:modelValue":r=>o.notes=r,rows:"2",placeholder:"Informations suppl√©mentaires...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none"},null,8,Ae),[[v,o.notes]])])]))),128))])):(u(),d("div",Be,t[33]||(t[33]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",null,"Aucun document m√©dical ajout√©",-1),e("p",{class:"text-sm"},'Cliquez sur "Ajouter" pour commencer',-1)])))]),e("div",$e,[e("button",{type:"button",onClick:t[8]||(t[8]=o=>s.$emit("close")),class:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors font-medium"}," Annuler "),e("button",{type:"submit",disabled:b.value,class:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-lg hover:from-emerald-600 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium flex items-center space-x-2"},[b.value?(u(),d("svg",Ue,t[34]||(t[34]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):k("",!0),e("span",null,x(b.value?"Ajout en cours...":"Ajouter l'√©l√®ve"),1)],8,De)])],32)])])]))}};export{Ee as _};
