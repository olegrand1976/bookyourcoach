import{_ as h}from"./r5g-w3Fw.js";import{f as k,r as V,h as b,i as C,c as i,a as s,d as f,b as N,w as U,j as q,k as j,l as d,v as u,m as r,n as M,t as x,F as A,p as E,o as n,q as v}from"./qntuUWic.js";const S={class:"min-h-screen bg-gray-50"},T={class:"flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},B={class:"max-w-md w-full space-y-8"},D={class:"mt-2 text-center text-sm text-gray-600"},I={class:"space-y-4"},L={class:"flex items-center"},F={for:"terms",class:"ml-2 block text-sm text-gray-900"},P={href:"#",class:"text-primary-600 hover:text-primary-500"},$=["disabled"],O={key:0},R={key:1},z={key:0,class:"bg-red-50 border border-red-200 rounded-md p-4"},G={class:"text-sm text-red-600"},H={class:"list-disc list-inside space-y-1"},W={__name:"register",setup(J){const y=k(),g=(a,e="info")=>{console.log(`[${e.toUpperCase()}] ${a}`)},o=V({name:"",email:"",password:"",password_confirmation:"",terms:!1}),m=b(!1),l=b([]),w=async()=>{var a,e,p,t;m.value=!0,l.value=[];try{await y.register(o),g("Inscription réussie","success"),await v("/dashboard")}catch(c){if((e=(a=c.response)==null?void 0:a.data)!=null&&e.errors){const _=c.response.data.errors;l.value=Object.values(_).flat()}else l.value=[((t=(p=c.response)==null?void 0:p.data)==null?void 0:t.message)||"Une erreur est survenue"];g("Erreur lors de l'inscription","error")}finally{m.value=!1}};return C(()=>{y.isAuthenticated&&v("/dashboard")}),(a,e)=>{const p=h;return n(),i("div",S,[s("div",T,[s("div",B,[s("div",null,[e[7]||(e[7]=s("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Inscription ",-1)),s("p",D,[e[6]||(e[6]=f(" Déjà un compte ? ",-1)),N(p,{to:"/login",class:"font-medium text-primary-600 hover:text-primary-500"},{default:U(()=>e[5]||(e[5]=[f(" Connexion ",-1)])),_:1,__:[5]})])]),s("form",{class:"mt-8 space-y-6",onSubmit:q(w,["prevent"])},[s("div",I,[s("div",null,[e[8]||(e[8]=s("label",{for:"name",class:"block text-sm font-medium text-gray-700"}," Nom complet ",-1)),d(s("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=t=>r(o).name=t),name:"name",type:"text",required:"",class:"input-field",placeholder:"Nom complet"},null,512),[[u,r(o).name]])]),s("div",null,[e[9]||(e[9]=s("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," Adresse email ",-1)),d(s("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=t=>r(o).email=t),name:"email",type:"email",autocomplete:"email",required:"",class:"input-field",placeholder:"Adresse email"},null,512),[[u,r(o).email]])]),s("div",null,[e[10]||(e[10]=s("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),d(s("input",{id:"password","onUpdate:modelValue":e[2]||(e[2]=t=>r(o).password=t),name:"password",type:"password",required:"",class:"input-field",placeholder:"Mot de passe"},null,512),[[u,r(o).password]])]),s("div",null,[e[11]||(e[11]=s("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700"}," Confirmer le mot de passe ",-1)),d(s("input",{id:"password_confirmation","onUpdate:modelValue":e[3]||(e[3]=t=>r(o).password_confirmation=t),name:"password_confirmation",type:"password",required:"",class:"input-field",placeholder:"Confirmer le mot de passe"},null,512),[[u,r(o).password_confirmation]])])]),s("div",L,[d(s("input",{id:"terms","onUpdate:modelValue":e[4]||(e[4]=t=>r(o).terms=t),name:"terms",type:"checkbox",required:"",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[M,r(o).terms]]),s("label",F,[f(x(a.t("registerPage.terms"))+" ",1),s("a",P,x(a.t("registerPage.termsLink")),1)])]),s("div",null,[s("button",{type:"submit",disabled:r(m),class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[r(m)?(n(),i("span",O,"Création du compte...")):(n(),i("span",R,"Inscription"))],8,$)]),r(l).length>0?(n(),i("div",z,[s("div",G,[s("ul",H,[(n(!0),i(A,null,E(r(l),t=>(n(),i("li",{key:t},x(t),1))),128))])])])):j("",!0)],32)])])])}}};export{W as default};
